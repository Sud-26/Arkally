/**
 * @license
 * Copyright (c) 2018 Dominic Carretto
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/trimox/angular-mdc-web/blob/master/LICENSE
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular-mdc/web/overlay"),require("@angular-mdc/web/portal"),require("rxjs"),require("rxjs/operators"),require("@angular-mdc/web/common"),require("@angular-mdc/web/button"),require("@angular-mdc/web/ripple")):"function"==typeof define&&define.amd?define("@angular-mdc/web/dialog",["exports","@angular/core","@angular-mdc/web/overlay","@angular-mdc/web/portal","rxjs","rxjs/operators","@angular-mdc/web/common","@angular-mdc/web/button","@angular-mdc/web/ripple"],e):e(((t=t||self).ng=t.ng||{},t.ng.web=t.ng.web||{},t.ng.web.dialog={}),t.ng.core,t.ng.web.overlay,t.ng.web.portal,t.rxjs,t.rxjs.operators,t.ng.web.common,t.ng.web.button,t.ng.web.ripple)}(this,function(t,e,n,o,i,a,r,c,s){"use strict";var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function l(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var d=function(){return(d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},f=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],p=f.join(","),h="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function _(t,e){e=e||{};var n,o,i,a=[],r=[],c=new O(t.ownerDocument||t),s=t.querySelectorAll(p);for(e.includeContainer&&h.call(t,p)&&(s=Array.prototype.slice.apply(s)).unshift(t),n=0;n<s.length;n++)m(o=s[n],c)&&(0===(i=v(o))?a.push(o):r.push({documentOrder:n,tabIndex:i,node:o}));return r.sort(b).map(function(t){return t.node}).concat(a)}function m(t,e){return!(!g(t,e)||function(t){return function(t){return C(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e=function(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e]}(t.ownerDocument.querySelectorAll('input[type="radio"][name="'+t.name+'"]'));return!e||e===t}(t)}(t)||v(t)<0)}function g(t,e){return e=e||new O(t.ownerDocument||t),!(t.disabled||function(t){return C(t)&&"hidden"===t.type}(t)||e.isUntouchable(t))}_.isTabbable=function(t,e){if(!t)throw new Error("No node provided");return!1!==h.call(t,p)&&m(t,e)},_.isFocusable=function(t,e){if(!t)throw new Error("No node provided");return!1!==h.call(t,y)&&g(t,e)};var y=f.concat("iframe").join(",");function v(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?function(t){return"true"===t.contentEditable}(t)?0:t.tabIndex:e}function b(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex}function C(t){return"INPUT"===t.tagName}function O(t){this.doc=t,this.cache=[]}O.prototype.hasDisplayNone=function(t,e){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var n=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n]))return t[n]}(this.cache,function(e){return e===t});if(n)return n[1];var o=!1;return"none"===(e=e||this.doc.defaultView.getComputedStyle(t)).display?o=!0:t.parentNode&&(o=this.hasDisplayNone(t.parentNode)),this.cache.push([t,o]),o},O.prototype.isUntouchable=function(t){if(t===this.doc.documentElement)return!1;var e=this.doc.defaultView.getComputedStyle(t);return!!this.hasDisplayNone(t,e)||"hidden"===e.visibility};var E=_,D=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var o in n)A.call(n,o)&&(t[o]=n[o])}return t},A=Object.prototype.hasOwnProperty;var T,S=(T=[],{activateTrap:function(t){if(T.length>0){var e=T[T.length-1];e!==t&&e.pause()}var n=T.indexOf(t);-1===n?T.push(t):(T.splice(n,1),T.push(t))},deactivateTrap:function(t){var e=T.indexOf(t);-1!==e&&T.splice(e,1),T.length>0&&T[T.length-1].unpause()}});function k(t){return setTimeout(t,0)}var w=function(t,e){var n=document,o="string"==typeof t?n.querySelector(t):t,i=D({returnFocusOnDeactivate:!0,escapeDeactivates:!0},e),a={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},r={activate:function(t){if(!a.active){m(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=n.activeElement;var e=t&&t.onActivate?t.onActivate:i.onActivate;return e&&e(),s(),r}},deactivate:c,pause:function(){!a.paused&&a.active&&(a.paused=!0,u())},unpause:function(){a.paused&&a.active&&(a.paused=!1,s())}};return r;function c(t){if(a.active){u(),a.active=!1,a.paused=!1,S.deactivateTrap(r);var e=t&&void 0!==t.onDeactivate?t.onDeactivate:i.onDeactivate;return e&&e(),(t&&void 0!==t.returnFocus?t.returnFocus:i.returnFocusOnDeactivate)&&k(function(){g(a.nodeFocusedBeforeActivation)}),r}}function s(){if(a.active)return S.activateTrap(r),m(),k(function(){g(d())}),n.addEventListener("focusin",p,!0),n.addEventListener("mousedown",f,!0),n.addEventListener("touchstart",f,!0),n.addEventListener("click",_,!0),n.addEventListener("keydown",h,!0),r}function u(){if(a.active)return n.removeEventListener("focusin",p,!0),n.removeEventListener("mousedown",f,!0),n.removeEventListener("touchstart",f,!0),n.removeEventListener("click",_,!0),n.removeEventListener("keydown",h,!0),r}function l(t){var e=i[t],o=e;if(!e)return null;if("string"==typeof e&&!(o=n.querySelector(e)))throw new Error("`"+t+"` refers to no known node");if("function"==typeof e&&!(o=e()))throw new Error("`"+t+"` did not return a node");return o}function d(){var t;if(!(t=null!==l("initialFocus")?l("initialFocus"):o.contains(n.activeElement)?n.activeElement:a.firstTabbableNode||l("fallbackFocus")))throw new Error("You can't have a focus-trap without at least one focusable element");return t}function f(t){o.contains(t.target)||(i.clickOutsideDeactivates?c({returnFocus:!E.isFocusable(t.target)}):t.preventDefault())}function p(t){o.contains(t.target)||t.target instanceof Document||(t.stopImmediatePropagation(),g(a.mostRecentlyFocusedNode||d()))}function h(t){if(!1!==i.escapeDeactivates&&function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}(t))return t.preventDefault(),void c();(function(t){return"Tab"===t.key||9===t.keyCode})(t)&&function(t){if(m(),t.shiftKey&&t.target===a.firstTabbableNode)return t.preventDefault(),void g(a.lastTabbableNode);t.shiftKey||t.target!==a.lastTabbableNode||(t.preventDefault(),g(a.firstTabbableNode))}(t)}function _(t){i.clickOutsideDeactivates||o.contains(t.target)||(t.preventDefault(),t.stopImmediatePropagation())}function m(){var t=E(o);a.firstTabbableNode=t[0]||d(),a.lastTabbableNode=t[t.length-1]||d()}function g(t){t!==n.activeElement&&(t&&t.focus?(t.focus(),a.mostRecentlyFocusedNode=t,function(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"==typeof t.select}(t)&&t.select()):g(d()))}},I=function(){function t(t){this.elementRef=t,this._action=""}return Object.defineProperty(t.prototype,"action",{get:function(){return this._action},set:function(t){t&&(this._action=t,this.elementRef.nativeElement.setAttribute("data-mdc-dialog-action",this._action))},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Directive,args:[{selector:"[mdcDialogAction]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={action:[{type:e.Input,args:["mdcDialogAction"]}]},t}(),N=function(){function t(t){this.elementRef=t}return t.decorators=[{type:e.Directive,args:[{selector:"mdc-dialog-scrim",host:{class:"mdc-dialog__scrim"}}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t}(),L=function(){function t(t){this.elementRef=t}return t.decorators=[{type:e.Directive,args:[{selector:"[mdcDialogContainer], mdc-dialog-container",host:{class:"mdc-dialog__container"}}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t}(),R=function(){function t(t){this.elementRef=t}return t.decorators=[{type:e.Directive,args:[{selector:"[mdcDialogSurface], mdc-dialog-surface",host:{class:"mdc-dialog__surface"}}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t}(),P=function(){function t(t){this.elementRef=t}return t.decorators=[{type:e.Directive,args:[{selector:"[mdcDialogTitle], mdc-dialog-title",host:{class:"mdc-dialog__title"}}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t}(),B=function(){function t(t){this.elementRef=t}return t.decorators=[{type:e.Directive,args:[{selector:"[mdcDialogContent], mdc-dialog-content",host:{class:"mdc-dialog__content"}}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t}(),F=function(){function t(t){this.elementRef=t,this._stacked=!1}return Object.defineProperty(t.prototype,"stacked",{get:function(){return this._stacked},set:function(t){this._stacked=r.toBoolean(t)},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Component,args:[{selector:"mdc-dialog-actions, [mdcDialogActions]",template:"<ng-content></ng-content>",exportAs:"mdcDialogActions",host:{class:"mdc-dialog__actions","[class.mdc-dialog--stacked]":"stacked"},encapsulation:e.ViewEncapsulation.None,changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={stacked:[{type:e.Input}]},t}(),M=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._default=!1,e}return l(n,t),Object.defineProperty(n.prototype,"default",{get:function(){return this._default},set:function(t){this._default=r.toBoolean(t)},enumerable:!0,configurable:!0}),n.decorators=[{type:e.Component,args:[{selector:"[mdcDialogButton]",exportAs:"mdcDialogButton",host:{class:"mdc-dialog__button","[class.mdc-button]":"true","[class.mdc-dialog__button--default]":"default"},template:"<ng-content></ng-content>",providers:[s.MdcRipple],encapsulation:e.ViewEncapsulation.None,changeDetection:e.ChangeDetectionStrategy.OnPush}]}],n.propDecorators={default:[{type:e.Input}]},n}(c.MdcButton),j=0,x=function(){function t(t,e,n){void 0===n&&(n="mdc-dialog-"+j++);var o=this;this._overlayRef=t,this._portalInstance=e,this.id=n,this._afterOpened=new i.Subject,this._beforeClosed=new i.Subject,this._afterClosed=new i.Subject,e._id=n,t.detachments().subscribe(function(){o._beforeClosed.next(o._result),o._beforeClosed.complete(),o._afterClosed.next(o._result),o._afterClosed.complete(),o.componentInstance=null,o._overlayRef.dispose()})}return t.prototype.close=function(t){this._result=t,this._overlayRef.dispose()},t.prototype.opened=function(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())},t.prototype.afterOpened=function(){return this._afterOpened.asObservable()},t.prototype.beforeClosed=function(){return this._beforeClosed.asObservable()},t.prototype.afterClosed=function(){return this._afterClosed.asObservable()},t}();function K(t){return t.scrollHeight>t.offsetHeight}function U(t){var e=new Set;return[].forEach.call(t,function(t){return e.add(t.offsetTop)}),e.size>1}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */var q={OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",CLOSING:"mdc-dialog--closing",SCROLLABLE:"mdc-dialog--scrollable",STACKED:"mdc-dialog--stacked",SCROLL_LOCK:"mdc-dialog-scroll-lock"},G={SCRIM_SELECTOR:".mdc-dialog__scrim",CONTAINER_SELECTOR:".mdc-dialog__container",SURFACE_SELECTOR:".mdc-dialog__surface",CONTENT_SELECTOR:".mdc-dialog__content",BUTTON_SELECTOR:".mdc-dialog__button",DEFAULT_BUTTON_SELECTOR:".mdc-dialog__button--default",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item"].join(", "),OPENING_EVENT:"MDCDialog:opening",OPENED_EVENT:"MDCDialog:opened",CLOSING_EVENT:"MDCDialog:closing",CLOSED_EVENT:"MDCDialog:closed",ACTION_ATTRIBUTE:"data-mdc-dialog-action",CLOSE_ACTION:"close",DESTROY_ACTION:"destroy"},V={DIALOG_ANIMATION_OPEN_TIME_MS:150,DIALOG_ANIMATION_CLOSE_TIME_MS:75};
/**
   * @license
   * Copyright 2018 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
function H(t,e){if(t.closest)return t.closest(e);for(var n=t;n;){if(z(n,e))return n;n=n.parentElement}return null}function z(t,e){return(t.matches||t.webkitMatchesSelector||t.msMatchesSelector).call(t,e)}function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Y(t,e,n){return e&&W(t.prototype,e),n&&W(t,n),t}function $(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
var tt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Z(this,t),this.adapter_=e}return Y(t,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),Y(t,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),t}();var et=function t(){Z(this,t)};et.prototype.root_,et.prototype.unbounded,et.prototype.disabled;
/**
   * @license
   * Copyright 2018 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
var nt=function(t){function e(t){var n;return Z(this,e),(n=X(this,J(e).call(this,Object.assign(e.defaultAdapter,t)))).isOpen_=!1,n.animationFrame_=0,n.animationTimer_=0,n.layoutFrame_=0,n.escapeKeyAction_=G.CLOSE_ACTION,n.scrimClickAction_=G.CLOSE_ACTION,n.autoStackButtons_=!0,n.areButtonsStacked_=!1,n}return $(e,tt),Y(e,null,[{key:"cssClasses",get:function(){return q}},{key:"strings",get:function(){return G}},{key:"numbers",get:function(){return V}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},addBodyClass:function(){},removeBodyClass:function(){},eventTargetMatches:function(){},trapFocus:function(){},releaseFocus:function(){},isContentScrollable:function(){},areButtonsStacked:function(){},getActionFromEvent:function(){},clickDefaultButton:function(){},reverseButtons:function(){},notifyOpening:function(){},notifyOpened:function(){},notifyClosing:function(){},notifyClosed:function(){}}}}]),Y(e,[{key:"init",value:function(){this.adapter_.hasClass(q.STACKED)&&this.setAutoStackButtons(!1)}},{key:"destroy",value:function(){this.isOpen_&&this.close(G.DESTROY_ACTION),this.animationTimer_&&(clearTimeout(this.animationTimer_),this.handleAnimationTimerEnd_()),this.layoutFrame_&&(cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=0)}},{key:"open",value:function(){var t=this;this.isOpen_=!0,this.adapter_.notifyOpening(),this.adapter_.addClass(q.OPENING),this.runNextAnimationFrame_(function(){t.adapter_.addClass(q.OPEN),t.adapter_.addBodyClass(q.SCROLL_LOCK),t.layout(),t.animationTimer_=setTimeout(function(){t.handleAnimationTimerEnd_(),t.adapter_.trapFocus(),t.adapter_.notifyOpened()},V.DIALOG_ANIMATION_OPEN_TIME_MS)})}},{key:"close",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isOpen_&&(this.isOpen_=!1,this.adapter_.notifyClosing(e),this.adapter_.addClass(q.CLOSING),this.adapter_.removeClass(q.OPEN),this.adapter_.removeBodyClass(q.SCROLL_LOCK),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout(function(){t.adapter_.releaseFocus(),t.handleAnimationTimerEnd_(),t.adapter_.notifyClosed(e)},V.DIALOG_ANIMATION_CLOSE_TIME_MS))}},{key:"isOpen",value:function(){return this.isOpen_}},{key:"getEscapeKeyAction",value:function(){return this.escapeKeyAction_}},{key:"setEscapeKeyAction",value:function(t){this.escapeKeyAction_=t}},{key:"getScrimClickAction",value:function(){return this.scrimClickAction_}},{key:"setScrimClickAction",value:function(t){this.scrimClickAction_=t}},{key:"getAutoStackButtons",value:function(){return this.autoStackButtons_}},{key:"setAutoStackButtons",value:function(t){this.autoStackButtons_=t}},{key:"layout",value:function(){var t=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame(function(){t.layoutInternal_(),t.layoutFrame_=0})}},{key:"layoutInternal_",value:function(){this.autoStackButtons_&&this.detectStackedButtons_(),this.detectScrollableContent_()}},{key:"detectStackedButtons_",value:function(){this.adapter_.removeClass(q.STACKED);var t=this.adapter_.areButtonsStacked();t&&this.adapter_.addClass(q.STACKED),t!==this.areButtonsStacked_&&(this.adapter_.reverseButtons(),this.areButtonsStacked_=t)}},{key:"detectScrollableContent_",value:function(){this.adapter_.removeClass(q.SCROLLABLE),this.adapter_.isContentScrollable()&&this.adapter_.addClass(q.SCROLLABLE)}},{key:"handleInteraction",value:function(t){var e="click"===t.type,n="Enter"===t.key||13===t.keyCode;if(e&&this.adapter_.eventTargetMatches(t.target,G.SCRIM_SELECTOR)&&""!==this.scrimClickAction_)this.close(this.scrimClickAction_);else if(e||"Space"===t.key||32===t.keyCode||n){var o=this.adapter_.getActionFromEvent(t);o?this.close(o):n&&!this.adapter_.eventTargetMatches(t.target,G.SUPPRESS_DEFAULT_PRESS_SELECTOR)&&this.adapter_.clickDefaultButton()}}},{key:"handleDocumentKeydown",value:function(t){"Escape"!==t.key&&27!==t.keyCode||""===this.escapeKeyAction_||this.close(this.escapeKeyAction_)}},{key:"handleAnimationTimerEnd_",value:function(){this.animationTimer_=0,this.adapter_.removeClass(q.OPENING),this.adapter_.removeClass(q.CLOSING)}},{key:"runNextAnimationFrame_",value:function(t){var e=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame(function(){e.animationFrame_=0,clearTimeout(e.animationTimer_),e.animationTimer_=setTimeout(t,0)})}}]),e}(),ot=(nt.strings,["resize","orientationchange"]),it=function(){function t(t,e,n,o){this._ngZone=t,this._platform=e,this._elementRef=n,this.dialogRef=o,this._destroy=new i.Subject,this._focusTrapInstance=null,this._scrollable=!0,this._layoutEventSubscription=null,this.config=o._portalInstance._config}return Object.defineProperty(t.prototype,"layoutEvents",{get:function(){return i.merge.apply(void 0,ot.map(function(t){return i.fromEvent(window,t)}))},enumerable:!0,configurable:!0}),t.prototype._createAdapter=function(){var t=this;return{addClass:function(e){return t._getDialog().classList.add(e)},removeClass:function(e){return t._getDialog().classList.remove(e)},hasClass:function(e){return t._getDialog().classList.contains(e)},addBodyClass:function(e){t._platform.isBrowser&&document.body.classList.add(e)},removeBodyClass:function(e){t._platform.isBrowser&&document.body.classList.remove(e)},eventTargetMatches:function(t,e){return z(t,e)},trapFocus:function(){return t._focusTrapInstance.activate()},releaseFocus:function(){return t._focusTrapInstance.deactivate()},isContentScrollable:function(){return!!t._content&&t._scrollable&&K(t._content.elementRef.nativeElement)},areButtonsStacked:function(){return U(t._buttons)},getActionFromEvent:function(t){var e=H(t.target,"["+G.ACTION_ATTRIBUTE+"]");return e&&e.getAttribute(G.ACTION_ATTRIBUTE)},clickDefaultButton:function(){var e=t._getDefaultButton();e&&e.click()},reverseButtons:function(){t._buttons&&(t._buttons.toArray().reverse(),t._buttons.forEach(function(t){return t.getHostElement().parentElement.appendChild(t.getHostElement())}))},notifyOpened:function(){return t.dialogRef.opened()},notifyClosed:function(e){return t._closeDialogByRef(e)}}},t.prototype.ngAfterViewInit=function(){this._foundation=new nt(this._createAdapter()),this._focusTrapInstance=this._createFocusTrapInstance(),this._initialize(),this._loadListeners(),this._foundation.open()},t.prototype._initialize=function(){this._scrollable=!!this.config.scrollable,this.config.clickOutsideToClose||this._foundation.setScrimClickAction(""),this.config.escapeToClose||this._foundation.setEscapeKeyAction(""),this.config.buttonsStacked||this._foundation.setAutoStackButtons(!1)},t.prototype.ngOnDestroy=function(){this._destroy.next(),this._destroy.complete(),this._layoutEventSubscription&&this._layoutEventSubscription.unsubscribe(),this._foundation&&this._foundation.destroy()},t.prototype._onInteraction=function(t){this._foundation.handleInteraction(t)},t.prototype._getDefaultButton=function(){var t=this._buttons?this._buttons.find(function(t){return t.default}):void 0;return t?t.getHostElement():void 0},t.prototype._closeDialogByRef=function(t){this.dialogRef.close(t)},t.prototype._loadListeners=function(){var t=this;this._layoutEventSubscription=this.layoutEvents.pipe().subscribe(function(){return t._foundation.layout()}),this._platform.isBrowser&&this._ngZone.runOutsideAngular(function(){return i.fromEvent(document,"keydown").pipe(a.takeUntil(t._destroy)).subscribe(function(e){return t._ngZone.run(function(){return t._foundation.handleDocumentKeydown(e)})})})},t.prototype._createFocusTrapInstance=function(t){return void 0===t&&(t=w),t(this._getDialog(),{initialFocus:this._getDefaultButton(),clickOutsideDeactivates:!0,escapeDeactivates:!1})},t.prototype._getDialog=function(){return this._elementRef.nativeElement},t.decorators=[{type:e.Component,args:[{selector:"mdc-dialog",exportAs:"mdc-dialog",host:{"[attr.id]":"config?.id",role:"alertdialog",class:"mdc-dialog","[attr.aria-modal]":"true","[attr.aria-labelledby]":"config?.ariaLabel","[attr.aria-label]":"config?.ariaLabel","[attr.aria-describedby]":"config?.ariaDescribedBy || null","(click)":"_onInteraction($event)","(keydown)":"_onInteraction($event)"},template:"\n  <mdc-dialog-scrim></mdc-dialog-scrim>\n  <ng-content></ng-content>",encapsulation:e.ViewEncapsulation.None,changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:e.NgZone},{type:r.Platform},{type:e.ElementRef},{type:x}]},t.propDecorators={_surface:[{type:e.ContentChild,args:[R]}],_content:[{type:e.ContentChild,args:[B]}],_buttons:[{type:e.ContentChildren,args:[M,{descendants:!0}]}]},t}(),at=function(){return function(){this.ariaDescribedBy=null,this.ariaLabel=null,this.escapeToClose=!0,this.clickOutsideToClose=!0,this.scrollable=!0,this.buttonsStacked=!0,this.data=null}}();function rt(){throw Error("Attempting to attach dialog content after content is already attached")}var ct=function(t){function n(e){var n=t.call(this)||this;return n._config=e,n._afterExit=new i.Subject,n}return l(n,t),n.prototype.attachComponentPortal=function(t){return this._portalOutlet.hasAttached()&&rt(),this._portalOutlet.attachComponentPortal(t)},n.prototype.attachTemplatePortal=function(t){return this._portalOutlet.hasAttached()&&rt(),this._portalOutlet.attachTemplatePortal(t)},n.decorators=[{type:e.Component,args:[{selector:"mdc-dialog-portal",host:{"[attr.id]":"_id"},template:"<ng-template cdkPortalOutlet></ng-template>",encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:at}]},n.propDecorators={_portalOutlet:[{type:e.ViewChild,args:[o.CdkPortalOutlet]}]},n}(o.BasePortalOutlet),st=new e.InjectionToken("MdcDialogData"),ut=new e.InjectionToken("mdc-dialog-default-options"),lt=function(){function t(t,e,n,o){var r=this;this._overlay=t,this._injector=e,this._defaultOptions=n,this._parentDialog=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new i.Subject,this._afterOpenedAtThisLevel=new i.Subject,this._ariaHiddenElements=new Map,this.afterAllClosed=i.defer(function(){return r.openDialogs.length?r._afterAllClosed:r._afterAllClosed.pipe(a.startWith(void 0))})}return Object.defineProperty(t.prototype,"openDialogs",{get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterOpened",{get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_afterAllClosed",{get:function(){var t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel},enumerable:!0,configurable:!0}),t.prototype.open=function(t,e){var n=this;if((e=function(t,e){return d({},e,t)}(e,this._defaultOptions||new at)).id&&this.getDialogById(e.id))throw Error('Dialog with id "'+e.id+'" exists already. The dialog id must be unique.');var o=this._createOverlay(),i=this._attachDialogContainer(o,e),a=this._attachDialogContent(t,i,o,e);return this.openDialogs.push(a),a.afterClosed().subscribe(function(){return n._removeOpenDialog(a)}),this.afterOpened.next(a),a},t.prototype.closeAll=function(){this._closeDialogs(this.openDialogs)},t.prototype.getDialogById=function(t){return this.openDialogs.find(function(e){return e.id===t})},t.prototype.ngOnDestroy=function(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()},t.prototype._createOverlay=function(){return this._overlay.create()},t.prototype._attachDialogContainer=function(t,e){var n=e&&e.viewContainerRef&&e.viewContainerRef.injector,i=new o.PortalInjector(n||this._injector,new WeakMap([[at,e]])),a=new o.ComponentPortal(ct,e.viewContainerRef,i);return t.attach(a).instance},t.prototype._attachDialogContent=function(t,n,i,a){var r=new x(i,n,a.id);if(t instanceof e.TemplateRef)n.attachTemplatePortal(new o.TemplatePortal(t,null,{$implicit:a.data,dialogRef:r}));else{var c=this._createInjector(a,r,n),s=n.attachComponentPortal(new o.ComponentPortal(t,void 0,c));r.componentInstance=s.instance}return r},t.prototype._createInjector=function(t,e,n){var i=t&&t.viewContainerRef&&t.viewContainerRef.injector,a=new WeakMap([[ct,n],[st,t.data],[x,e]]);return new o.PortalInjector(i||this._injector,a)},t.prototype._removeOpenDialog=function(t){var e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach(function(t,e){t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))},t.prototype._closeDialogs=function(t){for(var e=t.length;e--;)t[e].close()},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:n.Overlay},{type:e.Injector},{type:at,decorators:[{type:e.Optional},{type:e.Inject,args:[ut]}]},{type:t,decorators:[{type:e.Optional},{type:e.SkipSelf}]}]},t}();var dt=[I,F,M,it,L,ct,B,N,R,R,P],ft=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.OverlayModule,o.PortalModule],exports:dt,declarations:dt,providers:[lt],entryComponents:[ct,it]}]}],t}();t.MdcDialogModule=ft,t.MDC_DIALOG_DATA=st,t.MDC_DIALOG_DEFAULT_OPTIONS=ut,t.MdcDialog=lt,t.MdcDialogComponent=it,t.throwMdcDialogContentAlreadyAttachedError=rt,t.MdcDialogPortal=ct,t.MdcDialogAction=I,t.MdcDialogScrim=N,t.MdcDialogContainer=L,t.MdcDialogSurface=R,t.MdcDialogTitle=P,t.MdcDialogContent=B,t.MdcDialogActions=F,t.MdcDialogButton=M,t.MdcDialogConfig=at,t.MdcDialogRef=x,Object.defineProperty(t,"__esModule",{value:!0})});