/**
 * @license
 * Copyright (c) 2018 Dominic Carretto
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/trimox/angular-mdc-web/blob/master/LICENSE
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("@angular-mdc/web/common"),require("@angular-mdc/web/list")):"function"==typeof define&&define.amd?define("@angular-mdc/web/drawer",["exports","@angular/core","@angular/common","rxjs","rxjs/operators","@angular-mdc/web/common","@angular-mdc/web/list"],t):t(((e=e||self).ng=e.ng||{},e.ng.web=e.ng.web||{},e.ng.web.drawer={}),e.ng.core,e.ng.common,e.rxjs,e.rxjs.operators,e.ng.web.common,e.ng.web.list)}(this,function(e,t,n,r,i,o,a){"use strict";var s=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],c=s.join(","),u="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function l(e,t){t=t||{};var n,r,i,o=[],a=[],s=new v(e.ownerDocument||e),l=e.querySelectorAll(c);for(t.includeContainer&&u.call(e,c)&&(l=Array.prototype.slice.apply(l)).unshift(e),n=0;n<l.length;n++)d(r=l[n],s)&&(0===(i=m(r))?o.push(r):a.push({documentOrder:n,tabIndex:i,node:r}));return a.sort(h).map(function(e){return e.node}).concat(o)}function d(e,t){return!(!f(e,t)||function(e){return function(e){return _(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t=function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t]}(e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'));return!t||t===e}(e)}(e)||m(e)<0)}function f(e,t){return t=t||new v(e.ownerDocument||e),!(e.disabled||function(e){return _(e)&&"hidden"===e.type}(e)||t.isUntouchable(e))}l.isTabbable=function(e,t){if(!e)throw new Error("No node provided");return!1!==u.call(e,c)&&d(e,t)},l.isFocusable=function(e,t){if(!e)throw new Error("No node provided");return!1!==u.call(e,p)&&f(e,t)};var p=s.concat("iframe").join(",");function m(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:e.tabIndex:t}function h(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function _(e){return"INPUT"===e.tagName}function v(e){this.doc=e,this.cache=[]}v.prototype.hasDisplayNone=function(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var n=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return e[n]}(this.cache,function(t){return t===e});if(n)return n[1];var r=!1;return"none"===(t=t||this.doc.defaultView.getComputedStyle(e)).display?r=!0:e.parentNode&&(r=this.hasDisplayNone(e.parentNode)),this.cache.push([e,r]),r},v.prototype.isUntouchable=function(e){if(e===this.doc.documentElement)return!1;var t=this.doc.defaultView.getComputedStyle(e);return!!this.hasDisplayNone(e,t)||"hidden"===t.visibility};var y=l,g=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)b.call(n,r)&&(e[r]=n[r])}return e},b=Object.prototype.hasOwnProperty;var E,w=(E=[],{activateTrap:function(e){if(E.length>0){var t=E[E.length-1];t!==e&&t.pause()}var n=E.indexOf(e);-1===n?E.push(e):(E.splice(n,1),E.push(e))},deactivateTrap:function(e){var t=E.indexOf(e);-1!==t&&E.splice(t,1),E.length>0&&E[E.length-1].unpause()}});function C(e){return setTimeout(e,0)}var T=function(e,t){var n=document,r="string"==typeof e?n.querySelector(e):e,i=g({returnFocusOnDeactivate:!0,escapeDeactivates:!0},t),o={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},a={activate:function(e){if(!o.active){_(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement;var t=e&&e.onActivate?e.onActivate:i.onActivate;return t&&t(),c(),a}},deactivate:s,pause:function(){!o.paused&&o.active&&(o.paused=!0,u())},unpause:function(){o.paused&&o.active&&(o.paused=!1,c())}};return a;function s(e){if(o.active){u(),o.active=!1,o.paused=!1,w.deactivateTrap(a);var t=e&&void 0!==e.onDeactivate?e.onDeactivate:i.onDeactivate;return t&&t(),(e&&void 0!==e.returnFocus?e.returnFocus:i.returnFocusOnDeactivate)&&C(function(){v(o.nodeFocusedBeforeActivation)}),a}}function c(){if(o.active)return w.activateTrap(a),_(),C(function(){v(d())}),n.addEventListener("focusin",p,!0),n.addEventListener("mousedown",f,!0),n.addEventListener("touchstart",f,!0),n.addEventListener("click",h,!0),n.addEventListener("keydown",m,!0),a}function u(){if(o.active)return n.removeEventListener("focusin",p,!0),n.removeEventListener("mousedown",f,!0),n.removeEventListener("touchstart",f,!0),n.removeEventListener("click",h,!0),n.removeEventListener("keydown",m,!0),a}function l(e){var t=i[e],r=t;if(!t)return null;if("string"==typeof t&&!(r=n.querySelector(t)))throw new Error("`"+e+"` refers to no known node");if("function"==typeof t&&!(r=t()))throw new Error("`"+e+"` did not return a node");return r}function d(){var e;if(!(e=null!==l("initialFocus")?l("initialFocus"):r.contains(n.activeElement)?n.activeElement:o.firstTabbableNode||l("fallbackFocus")))throw new Error("You can't have a focus-trap without at least one focusable element");return e}function f(e){r.contains(e.target)||(i.clickOutsideDeactivates?s({returnFocus:!y.isFocusable(e.target)}):e.preventDefault())}function p(e){r.contains(e.target)||e.target instanceof Document||(e.stopImmediatePropagation(),v(o.mostRecentlyFocusedNode||d()))}function m(e){if(!1!==i.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e))return e.preventDefault(),void s();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){if(_(),e.shiftKey&&e.target===o.firstTabbableNode)return e.preventDefault(),void v(o.lastTabbableNode);e.shiftKey||e.target!==o.lastTabbableNode||(e.preventDefault(),v(o.firstTabbableNode))}(e)}function h(e){i.clickOutsideDeactivates||r.contains(e.target)||(e.preventDefault(),e.stopImmediatePropagation())}function _(){var e=y(r);o.firstTabbableNode=e[0]||d(),o.lastTabbableNode=e[e.length-1]||d()}function v(e){e!==n.activeElement&&(e&&e.focus?(e.focus(),o.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):v(d()))}};function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */var F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O(this,e),this.adapter_=t}return D(e,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),D(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),e}(),k={ROOT:"mdc-drawer",DISMISSIBLE:"mdc-drawer--dismissible",MODAL:"mdc-drawer--modal",OPEN:"mdc-drawer--open",ANIMATE:"mdc-drawer--animate",OPENING:"mdc-drawer--opening",CLOSING:"mdc-drawer--closing"},M={APP_CONTENT_SELECTOR:".mdc-drawer-app-content",SCRIM_SELECTOR:".mdc-drawer-scrim",CLOSE_EVENT:"MDCDrawer:closed",OPEN_EVENT:"MDCDrawer:opened"},P=function(e){function t(e){var n;return O(this,t),(n=L(this,N(t).call(this,Object.assign(t.defaultAdapter,e)))).animationFrame_=0,n.animationTimer_=0,n}return I(t,F),D(t,null,[{key:"strings",get:function(){return M}},{key:"cssClasses",get:function(){return k}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},elementHasClass:function(){},notifyClose:function(){},notifyOpen:function(){},saveFocus:function(){},restoreFocus:function(){},focusActiveNavigationItem:function(){},trapFocus:function(){},releaseFocus:function(){}}}}]),D(t,[{key:"destroy",value:function(){this.animationFrame_&&cancelAnimationFrame(this.animationFrame_),this.animationTimer_&&clearTimeout(this.animationTimer_)}},{key:"open",value:function(){var e=this;this.isOpen()||this.isOpening()||this.isClosing()||(this.adapter_.addClass(k.OPEN),this.adapter_.addClass(k.ANIMATE),this.runNextAnimationFrame_(function(){e.adapter_.addClass(k.OPENING)}),this.adapter_.saveFocus())}},{key:"close",value:function(){!this.isOpen()||this.isOpening()||this.isClosing()||this.adapter_.addClass(k.CLOSING)}},{key:"opened",value:function(){}},{key:"closed",value:function(){}},{key:"isOpen",value:function(){return this.adapter_.hasClass(k.OPEN)}},{key:"isOpening",value:function(){return this.adapter_.hasClass(k.OPENING)||this.adapter_.hasClass(k.ANIMATE)}},{key:"isClosing",value:function(){return this.adapter_.hasClass(k.CLOSING)}},{key:"handleKeydown",value:function(e){var t=e.keyCode;("Escape"===e.key||27===t)&&this.close()}},{key:"handleTransitionEnd",value:function(e){var t=k.OPENING,n=k.CLOSING,r=k.OPEN,i=k.ANIMATE,o=k.ROOT;e.target instanceof Element&&this.adapter_.elementHasClass(e.target,o)&&(this.isClosing()?(this.adapter_.removeClass(r),this.closed(),this.adapter_.restoreFocus(),this.adapter_.notifyClose()):(this.adapter_.focusActiveNavigationItem(),this.opened(),this.adapter_.notifyOpen()),this.adapter_.removeClass(i),this.adapter_.removeClass(t),this.adapter_.removeClass(n))}},{key:"runNextAnimationFrame_",value:function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame(function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)})}}]),t}(),j=function(e){function t(){return O(this,t),L(this,N(t).apply(this,arguments))}return I(t,P),D(t,[{key:"opened",value:function(){this.adapter_.trapFocus()}},{key:"closed",value:function(){this.adapter_.releaseFocus()}},{key:"handleScrimClick",value:function(){this.close()}}]),t}(),x={ROOT:"mdc-list",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated"};".".concat(x.LIST_ITEM_CLASS," button:not(:disabled),\n  .").concat(x.LIST_ITEM_CLASS," a"),".".concat(x.LIST_ITEM_CLASS," button:not(:disabled), .").concat(x.LIST_ITEM_CLASS," a,\n  .").concat(x.LIST_ITEM_CLASS,' input[type="radio"]:not(:disabled),\n  .').concat(x.LIST_ITEM_CLASS,' input[type="checkbox"]:not(:disabled)');var R=function(){function e(e){this.elementRef=e}return e.decorators=[{type:t.Component,args:[{selector:"mdc-drawer-header",template:'\n  <ng-content></ng-content>\n  <h3 class="mdc-drawer__title" *ngIf="title">{{title}}</h3>\n  <h6 class="mdc-drawer__subtitle" *ngIf="subtitle">{{subtitle}}</h6>',host:{class:"mdc-drawer__header"},changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={title:[{type:t.Input}],subtitle:[{type:t.Input}]},e}(),H=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"[mdcDrawerTitle]",host:{class:"mdc-drawer__title"}}]}],e}(),q=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"[mdcDrawerSubtitle]",host:{class:"mdc-drawer__subtitle"}}]}],e}(),B=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"mdc-drawer-content, [mdcDrawerContent]",host:{class:"mdc-drawer__content"}}]}],e}(),G=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"mdc-drawer-app-content, [mdcDrawerAppContent]",host:{class:"mdc-drawer-app-content"}}]}],e}(),V=function(){function e(e,n,r,i){this._platform=e,this._ngZone=n,this._changeDetectorRef=r,this.elementRef=i,this._initialized=!1,this._previousFocus=null,this._scrimElement=null,this._focusTrapInstance=null,this._open=!1,this._drawer="permanent",this.opened=new t.EventEmitter,this.closed=new t.EventEmitter,this._transitionEndSubscription=null,this._scrimSubscription=null,this._foundation=new P(this._createAdapter())}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},set:function(e){this._open=o.toBoolean(e),this._platform.isBrowser&&(this._open?this._foundation.open():this._foundation.close()),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawer",{get:function(){return this._drawer},set:function(e){this._drawer!==e&&(this._initialized=!1,this.setDrawer(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedAdjustElement",{get:function(){return this._fixedAdjustElement},set:function(e){this.setFixedAdjustElement(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return"modal"===this.drawer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dismissible",{get:function(){return"dismissible"===this.drawer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"permanent",{get:function(){return"permanent"===this.drawer},enumerable:!0,configurable:!0}),e.prototype._createAdapter=function(){var e=this;return{addClass:function(t){return e._getHostElement().classList.add(t)},removeClass:function(t){return e._getHostElement().classList.remove(t)},hasClass:function(t){return e._getHostElement().classList.contains(t)},elementHasClass:function(e,t){return e.classList.contains(t)},saveFocus:function(){return e._previousFocus=e._platform.isBrowser?document.activeElement:null},restoreFocus:function(){if(e._platform.isBrowser){var t=e._previousFocus&&e._previousFocus.focus;e._getHostElement().contains(document.activeElement)&&t&&e._previousFocus.focus()}},focusActiveNavigationItem:function(){if(e._platform.isBrowser&&e._list){var t=e._list.getSelectedItem();t&&t.focus()}},notifyClose:function(){return e.closed.emit()},notifyOpen:function(){return e.opened.emit()},trapFocus:function(){return e._focusTrapInstance.activate()},releaseFocus:function(){return e._focusTrapInstance.deactivate()}}},e.prototype.ngAfterViewInit=function(){this._initListType(),this._initialized||this._initFoundation()},e.prototype.ngOnDestroy=function(){this.open=!1,this._scrimElement&&this._scrimElement.remove(),this._unloadListeners(),this._foundation&&this._platform.isBrowser&&this._foundation.destroy()},e.prototype.setDrawer=function(e){e||(e="permanent"),this.drawer!==e&&(this._drawer=e,this._initFoundation())},e.prototype.setFixedAdjustElement=function(e){this._fixedAdjustElement=e,e?this._getHostElement().style.setProperty("position","absolute"):this._getHostElement().style.removeProperty("position"),this._changeDetectorRef.markForCheck()},e.prototype._onKeydown=function(e){this._foundation.handleKeydown(e)},e.prototype._loadListeners=function(){this._unloadListeners(),this.modal&&this._platform.isBrowser?(this._createScrim(),this._focusTrapInstance=this._createFocusTrapInstance()):this._scrimElement&&this._scrimElement.remove(),this._initTransitionEndListener()},e.prototype._unloadListeners=function(){this._scrimSubscription&&this._scrimSubscription.unsubscribe(),this._transitionEndSubscription&&this._transitionEndSubscription.unsubscribe()},e.prototype._createScrim=function(){var e=this;this._scrimElement=document.createElement("div"),this._scrimElement.classList.add("mdc-drawer-scrim"),this._getHostElement().insertAdjacentElement("afterend",this._scrimElement),this._scrimSubscription=this._ngZone.runOutsideAngular(function(){return r.fromEvent(e._scrimElement,"click").subscribe(function(){return e._ngZone.run(function(){return e.open=!1})})})},e.prototype._initFoundation=function(){this._initialized||(this._initialized=!0,this._removeDrawerModifiers(),this.modal?this._foundation=new j(this._createAdapter()):this._foundation=new P(this._createAdapter()),this.permanent||this._getHostElement().classList.add("mdc-drawer--"+this.drawer),this._loadListeners(),this._changeDetectorRef.markForCheck())},e.prototype._initListType=function(){this._list&&(this._list.singleSelection||void 0===this._list.singleSelection)&&(this._list.wrapFocus=!0,this._list.singleSelection=!0,this._list.useActivatedClass=!0)},e.prototype._removeDrawerModifiers=function(){this._getHostElement().classList.remove("mdc-drawer--modal"),this._getHostElement().classList.remove("mdc-drawer--dismissible")},e.prototype._initTransitionEndListener=function(){var e=this;this._transitionEndSubscription=this._ngZone.runOutsideAngular(function(){return r.fromEvent(e._getHostElement(),"transitionend").pipe(i.filter(function(t){return t.target===e._getHostElement()})).subscribe(function(t){return e._ngZone.run(function(){return e._foundation.handleTransitionEnd(t)})})})},e.prototype._createFocusTrapInstance=function(e){return void 0===e&&(e=T),e(this._getHostElement(),{clickOutsideDeactivates:!0,initialFocus:this._getHostElement(),escapeDeactivates:!1,returnFocusOnDeactivate:!1})},e.prototype._getHostElement=function(){return this.elementRef.nativeElement},e.decorators=[{type:t.Component,args:[{selector:"mdc-drawer",exportAs:"mdcDrawer",host:{role:"navigation",class:"mdc-drawer","(keydown)":"_onKeydown($event)"},template:"<ng-content></ng-content>",changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:o.Platform},{type:t.NgZone},{type:t.ChangeDetectorRef},{type:t.ElementRef}]},e.propDecorators={open:[{type:t.Input}],drawer:[{type:t.Input}],fixedAdjustElement:[{type:t.Input}],opened:[{type:t.Output}],closed:[{type:t.Output}],_list:[{type:t.ContentChild,args:[a.MdcList]}]},e}(),K=[V,G,B,R,q,H],Z=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],exports:[K],declarations:[K]}]}],e}();e.MdcDrawerModule=Z,e.MdcDrawerHeader=R,e.MdcDrawerTitle=H,e.MdcDrawerSubtitle=q,e.MdcDrawerContent=B,e.MdcDrawerAppContent=G,e.MdcDrawer=V,Object.defineProperty(e,"__esModule",{value:!0})});