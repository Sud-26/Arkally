/**
 * @license
 * Copyright (c) 2018 Dominic Carretto
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/trimox/angular-mdc-web/blob/master/LICENSE
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular-mdc/web/menu-surface"),require("rxjs"),require("rxjs/operators"),require("@angular-mdc/web/common"),require("@angular-mdc/web/list")):"function"==typeof define&&define.amd?define("@angular-mdc/web/menu",["exports","@angular/core","@angular-mdc/web/menu-surface","rxjs","rxjs/operators","@angular-mdc/web/common","@angular-mdc/web/list"],t):t(((e=e||self).ng=e.ng||{},e.ng.web=e.ng.web||{},e.ng.web.menu={}),e.ng.core,e.ng.web.menuSurface,e.rxjs,e.rxjs.operators,e.ng.web.common,e.ng.web.list)}(this,function(e,t,n,i,s,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.adapter_=t}return d(e,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),d(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),e}(),I={ROOT:"mdc-menu",MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group"},E={SELECTED_EVENT:"MDCMenu:selected",ARIA_SELECTED_ATTR:"aria-selected",LIST_SELECTOR:".mdc-list",CHECKBOX_SELECTOR:'input[type="checkbox"]'},A={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},y={CLOSED_EVENT:"MDCMenuSurface:closed",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:'button:not(:disabled), [href]:not([aria-disabled="true"]), input:not(:disabled), select:not(:disabled), textarea:not(:disabled), [tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'},C={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67},g=1,x=4,T=8,b={TOP_LEFT:0,TOP_RIGHT:x,BOTTOM_LEFT:g,BOTTOM_RIGHT:g|x,TOP_START:T,TOP_END:T|x,BOTTOM_START:g|T,BOTTOM_END:g|x|T},v=function(e){function t(e){var n;return u(this,t),(n=m(this,h(t).call(this,Object.assign(t.defaultAdapter,e)))).isOpen_=!1,n.openAnimationEndTimerId_=0,n.closeAnimationEndTimerId_=0,n.animationRequestId_=0,n.dimensions_,n.anchorCorner_=b.TOP_START,n.anchorMargin_={top:0,right:0,bottom:0,left:0},n.measures_=null,n.quickOpen_=!1,n.hoistedElement_=!1,n.isFixedPosition_=!1,n.position_={x:0,y:0},n}return _(t,p),d(t,null,[{key:"cssClasses",get:function(){return A}},{key:"strings",get:function(){return y}},{key:"numbers",get:function(){return C}},{key:"Corner",get:function(){return b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},notifyClose:function(){},notifyOpen:function(){},isElementInContainer:function(){return!1},isRtl:function(){return!1},setTransformOrigin:function(){},isFocused:function(){return!1},saveFocus:function(){},restoreFocus:function(){},isFirstElementFocused:function(){},isLastElementFocused:function(){},focusFirstElement:function(){},focusLastElement:function(){},getInnerDimensions:function(){return{}},getAnchorDimensions:function(){return{}},getWindowDimensions:function(){return{}},getBodyDimensions:function(){return{}},getWindowScroll:function(){return{}},setPosition:function(){},setMaxHeight:function(){}}}}]),d(t,[{key:"init",value:function(){var e=t.cssClasses,n=e.ROOT,i=e.OPEN;if(!this.adapter_.hasClass(n))throw new Error("".concat(n," class required in root element."));this.adapter_.hasClass(i)&&(this.isOpen_=!0)}},{key:"destroy",value:function(){clearTimeout(this.openAnimationEndTimerId_),clearTimeout(this.closeAnimationEndTimerId_),cancelAnimationFrame(this.animationRequestId_)}},{key:"setAnchorCorner",value:function(e){this.anchorCorner_=e}},{key:"setAnchorMargin",value:function(e){this.anchorMargin_.top="number"==typeof e.top?e.top:0,this.anchorMargin_.right="number"==typeof e.right?e.right:0,this.anchorMargin_.bottom="number"==typeof e.bottom?e.bottom:0,this.anchorMargin_.left="number"==typeof e.left?e.left:0}},{key:"setIsHoisted",value:function(e){this.hoistedElement_=e}},{key:"setFixedPosition",value:function(e){this.isFixedPosition_=e}},{key:"setAbsolutePosition",value:function(e,t){this.position_.x=this.typeCheckisFinite_(e)?e:0,this.position_.y=this.typeCheckisFinite_(t)?t:0}},{key:"setQuickOpen",value:function(e){this.quickOpen_=e}},{key:"handleBodyClick",value:function(e){var t=e.target;this.adapter_.isElementInContainer(t)||this.close()}},{key:"handleKeydown",value:function(e){var t=e.keyCode,n=e.key,i=e.shiftKey,s="Tab"===n||9===t;"Escape"===n||27===t?this.close():s&&(this.adapter_.isLastElementFocused()&&!i?(this.adapter_.focusFirstElement(),e.preventDefault()):this.adapter_.isFirstElementFocused()&&i&&(this.adapter_.focusLastElement(),e.preventDefault()))}},{key:"getAutoLayoutMeasurements_",value:function(){var e=this.adapter_.getAnchorDimensions(),t=this.adapter_.getWindowDimensions(),n=this.adapter_.getBodyDimensions(),i=this.adapter_.getWindowScroll();return e||(e={x:this.position_.x,y:this.position_.y,top:this.position_.y,bottom:this.position_.y,left:this.position_.x,right:this.position_.x,height:0,width:0}),{viewport:t,bodyDimensions:n,windowScroll:i,viewportDistance:{top:e.top,right:t.width-e.right,left:e.left,bottom:t.height-e.bottom},anchorHeight:e.height,anchorWidth:e.width,surfaceHeight:this.dimensions_.height,surfaceWidth:this.dimensions_.width}}},{key:"getOriginCorner_",value:function(){var e=b.TOP_LEFT,t=this.measures_,n=t.viewportDistance,i=t.anchorHeight,s=t.anchorWidth,o=t.surfaceHeight,r=t.surfaceWidth,a=Boolean(this.anchorCorner_&g),u=a?n.top+i+this.anchorMargin_.bottom:n.top+this.anchorMargin_.top,c=o-(a?n.bottom-this.anchorMargin_.bottom:n.bottom+i-this.anchorMargin_.top);c>0&&o-u<c&&(e|=g);var d=this.adapter_.isRtl(),l=Boolean(this.anchorCorner_&T),_=Boolean(this.anchorCorner_&x),h=_&&!d||!_&&l&&d,f=r-(h?n.left+s+this.anchorMargin_.right:n.left+this.anchorMargin_.left),m=r-(h?n.right-this.anchorMargin_.right:n.right+s-this.anchorMargin_.left);return(f<0&&h&&d||_&&!h&&f<0||m>0&&f<m)&&(e|=x),e}},{key:"getHorizontalOriginOffset_",value:function(e){var t=this.measures_.anchorWidth,n=Boolean(e&x),i=Boolean(this.anchorCorner_&x);if(n){var s=i?t-this.anchorMargin_.left:this.anchorMargin_.right;return this.hoistedElement_||this.isFixedPosition_?s-(this.measures_.viewport.width-this.measures_.bodyDimensions.width):s}return i?t-this.anchorMargin_.right:this.anchorMargin_.left}},{key:"getVerticalOriginOffset_",value:function(e){var t=this.measures_.anchorHeight,n=Boolean(e&g),i=Boolean(this.anchorCorner_&g);return n?i?t-this.anchorMargin_.top:-this.anchorMargin_.bottom:i?t+this.anchorMargin_.bottom:this.anchorMargin_.top}},{key:"getMenuSurfaceMaxHeight_",value:function(e){var n=0,i=this.measures_.viewportDistance,s=Boolean(e&g),o=t.numbers.MARGIN_TO_EDGE;return s?(n=i.top+this.anchorMargin_.top-o,this.anchorCorner_&g||(n+=this.measures_.anchorHeight)):(n=i.bottom-this.anchorMargin_.bottom+this.measures_.anchorHeight-o,this.anchorCorner_&g&&(n-=this.measures_.anchorHeight)),n}},{key:"autoPosition_",value:function(){var e;this.measures_=this.getAutoLayoutMeasurements_();var t=this.getOriginCorner_(),n=this.getMenuSurfaceMaxHeight_(t),i=t&g?"bottom":"top",s=t&x?"right":"left",o=this.getHorizontalOriginOffset_(t),r=this.getVerticalOriginOffset_(t),a=(l(e={},s,o||"0"),l(e,i,r||"0"),e),u=this.measures_,c=u.anchorWidth,d=u.surfaceWidth;for(var _ in c/d>C.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(s="center"),(this.hoistedElement_||this.isFixedPosition_)&&(a=this.adjustPositionForHoistedElement_(a)),a)a.hasOwnProperty(_)&&"0"!==a[_]&&(a[_]="".concat(parseInt(a[_],10),"px"));this.adapter_.setTransformOrigin("".concat(s," ").concat(i)),this.adapter_.setPosition(a),this.adapter_.setMaxHeight(n?n+"px":""),this.measures_=null}},{key:"adjustPositionForHoistedElement_",value:function(e){var t=this.measures_,n=t.windowScroll,i=t.viewportDistance;for(var s in e)e.hasOwnProperty(s)&&(i.hasOwnProperty(s)&&(e[s]=parseInt(e[s],10)+i[s]),this.isFixedPosition_||("top"===s?e[s]=parseInt(e[s],10)+n.y:"bottom"===s?e[s]=parseInt(e[s],10)-n.y:"left"===s?e[s]=parseInt(e[s],10)+n.x:"right"===s&&(e[s]=parseInt(e[s],10)-n.x)));return e}},{key:"open",value:function(){var e=this;this.adapter_.saveFocus(),this.quickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId_=requestAnimationFrame(function(){e.adapter_.addClass(t.cssClasses.OPEN),e.dimensions_=e.adapter_.getInnerDimensions(),e.autoPosition_(),e.quickOpen_?e.adapter_.notifyOpen():e.openAnimationEndTimerId_=setTimeout(function(){e.openAnimationEndTimerId_=0,e.adapter_.removeClass(t.cssClasses.ANIMATING_OPEN),e.adapter_.notifyOpen()},C.TRANSITION_OPEN_DURATION)}),this.isOpen_=!0}},{key:"close",value:function(){var e=this;this.quickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){e.adapter_.removeClass(t.cssClasses.OPEN),e.quickOpen_?e.adapter_.notifyClose():e.closeAnimationEndTimerId_=setTimeout(function(){e.closeAnimationEndTimerId_=0,e.adapter_.removeClass(t.cssClasses.ANIMATING_CLOSED),e.adapter_.notifyClose()},C.TRANSITION_CLOSE_DURATION)}),this.isOpen_=!1,this.maybeRestoreFocus_()}},{key:"maybeRestoreFocus_",value:function(){(this.adapter_.isFocused()||this.adapter_.isElementInContainer(document.activeElement))&&this.adapter_.restoreFocus()}},{key:"isOpen",value:function(){return this.isOpen_}},{key:"typeCheckisFinite_",value:function(e){return"number"==typeof e&&isFinite(e)}}]),t}(),O={ROOT:"mdc-list",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated"},S={ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_SELECTED:"aria-selected",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',RADIO_SELECTOR:'input[type="radio"]:not(:disabled)',CHECKBOX_SELECTOR:'input[type="checkbox"]:not(:disabled)',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"]:not(:disabled), input[type="radio"]:not(:disabled)',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:".".concat(O.LIST_ITEM_CLASS," button:not(:disabled),\n  .").concat(O.LIST_ITEM_CLASS," a"),FOCUSABLE_CHILD_ELEMENTS:".".concat(O.LIST_ITEM_CLASS," button:not(:disabled), .").concat(O.LIST_ITEM_CLASS," a,\n  .").concat(O.LIST_ITEM_CLASS,' input[type="radio"]:not(:disabled),\n  .').concat(O.LIST_ITEM_CLASS,' input[type="checkbox"]:not(:disabled)'),ENABLED_ITEMS_SELECTOR:".mdc-list-item:not(.mdc-list-item--disabled)",ACTION_EVENT:"MDCList:action"},k=["input","button","textarea","select"],L=function(e){function t(e){var n;return u(this,t),(n=m(this,h(t).call(this,Object.assign(t.defaultAdapter,e)))).wrapFocus_=!1,n.isVertical_=!0,n.isSingleSelectionList_=!1,n.selectedIndex_=-1,n.focusedItemIndex_=-1,n.useActivatedClass_=!1,n.isCheckboxList_=!1,n.isRadioList_=!1,n}return _(t,p),d(t,null,[{key:"strings",get:function(){return S}},{key:"cssClasses",get:function(){return O}},{key:"defaultAdapter",get:function(){return{getListItemCount:function(){},getFocusedElementIndex:function(){},setAttributeForElementIndex:function(){},removeAttributeForElementIndex:function(){},addClassForElementIndex:function(){},removeClassForElementIndex:function(){},focusItemAtIndex:function(){},setTabIndexForListItemChildren:function(){},hasRadioAtIndex:function(){},hasCheckboxAtIndex:function(){},isCheckboxCheckedAtIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},notifyAction:function(){},isFocusInsideList:function(){}}}}]),d(t,[{key:"layout",value:function(){0!==this.adapter_.getListItemCount()&&(this.adapter_.hasCheckboxAtIndex(0)?this.isCheckboxList_=!0:this.adapter_.hasRadioAtIndex(0)&&(this.isRadioList_=!0))}},{key:"setWrapFocus",value:function(e){this.wrapFocus_=e}},{key:"setVerticalOrientation",value:function(e){this.isVertical_=e}},{key:"setSingleSelection",value:function(e){this.isSingleSelectionList_=e}},{key:"setUseActivatedClass",value:function(e){this.useActivatedClass_=e}},{key:"getSelectedIndex",value:function(){return this.selectedIndex_}},{key:"setSelectedIndex",value:function(e){this.isIndexValid_(e)&&(this.isCheckboxList_?this.setCheckboxAtIndex_(e):this.isRadioList_?this.setRadioAtIndex_(e):this.setSingleSelectionAtIndex_(e))}},{key:"handleFocusIn",value:function(e,t){t>=0&&this.adapter_.setTabIndexForListItemChildren(t,0)}},{key:"handleFocusOut",value:function(e,t){var n=this;t>=0&&this.adapter_.setTabIndexForListItemChildren(t,-1),setTimeout(function(){n.adapter_.isFocusInsideList()||n.setTabindexToFirstSelectedItem_()},0)}},{key:"handleKeydown",value:function(e,t,n){var i="ArrowLeft"===e.key||37===e.keyCode,s="ArrowUp"===e.key||38===e.keyCode,o="ArrowRight"===e.key||39===e.keyCode,r="ArrowDown"===e.key||40===e.keyCode,a="Home"===e.key||36===e.keyCode,u="End"===e.key||35===e.keyCode,c="Enter"===e.key||13===e.keyCode,d="Space"===e.key||32===e.keyCode,l=this.adapter_.getFocusedElementIndex(),_=-1;if(!(-1===l&&(l=n)<0)){if(this.isVertical_&&r||!this.isVertical_&&o)this.preventDefaultEvent_(e),_=this.focusNextElement(l);else if(this.isVertical_&&s||!this.isVertical_&&i)this.preventDefaultEvent_(e),_=this.focusPrevElement(l);else if(a)this.preventDefaultEvent_(e),_=this.focusFirstElement();else if(u)this.preventDefaultEvent_(e),_=this.focusLastElement();else if((c||d)&&t){if("A"===e.target.tagName&&c)return;this.preventDefaultEvent_(e),this.isSelectableList_()&&this.setSelectedIndexOnAction_(l),this.adapter_.notifyAction(l)}this.focusedItemIndex_=l,_>=0&&(this.setTabindexAtIndex_(_),this.focusedItemIndex_=_)}}},{key:"handleClick",value:function(e,t){-1!==e&&(this.isSelectableList_()&&this.setSelectedIndexOnAction_(e,t),this.adapter_.notifyAction(e),this.setTabindexAtIndex_(e),this.focusedItemIndex_=e)}},{key:"preventDefaultEvent_",value:function(e){var t="".concat(e.target.tagName).toLowerCase();-1===k.indexOf(t)&&e.preventDefault()}},{key:"focusNextElement",value:function(e){var t=e+1;if(t>=this.adapter_.getListItemCount()){if(!this.wrapFocus_)return e;t=0}return this.adapter_.focusItemAtIndex(t),t}},{key:"focusPrevElement",value:function(e){var t=e-1;if(t<0){if(!this.wrapFocus_)return e;t=this.adapter_.getListItemCount()-1}return this.adapter_.focusItemAtIndex(t),t}},{key:"focusFirstElement",value:function(){return this.adapter_.focusItemAtIndex(0),0}},{key:"focusLastElement",value:function(){var e=this.adapter_.getListItemCount()-1;return this.adapter_.focusItemAtIndex(e),e}},{key:"setSingleSelectionAtIndex_",value:function(e){var t=O.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass_&&(t=O.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex_>=0&&this.selectedIndex_!==e&&(this.adapter_.removeClassForElementIndex(this.selectedIndex_,t),this.adapter_.setAttributeForElementIndex(this.selectedIndex_,S.ARIA_SELECTED,"false")),this.adapter_.addClassForElementIndex(e,t),this.adapter_.setAttributeForElementIndex(e,S.ARIA_SELECTED,"true"),this.selectedIndex_=e}},{key:"setRadioAtIndex_",value:function(e){this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,!0),this.selectedIndex_>=0&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,S.ARIA_CHECKED,"false"),this.adapter_.setAttributeForElementIndex(e,S.ARIA_CHECKED,"true"),this.selectedIndex_=e}},{key:"setCheckboxAtIndex_",value:function(e){for(var t=0;t<this.adapter_.getListItemCount();t++){var n=!1;e.indexOf(t)>=0&&(n=!0),this.adapter_.setCheckedCheckboxOrRadioAtIndex(t,n),this.adapter_.setAttributeForElementIndex(t,S.ARIA_CHECKED,n?"true":"false")}this.selectedIndex_=e}},{key:"setTabindexAtIndex_",value:function(e){-1===this.focusedItemIndex_&&0!==e?this.adapter_.setAttributeForElementIndex(0,"tabindex",-1):this.focusedItemIndex_>=0&&this.focusedItemIndex_!==e&&this.adapter_.setAttributeForElementIndex(this.focusedItemIndex_,"tabindex",-1),this.adapter_.setAttributeForElementIndex(e,"tabindex",0)}},{key:"isSelectableList_",value:function(){return this.isSingleSelectionList_||this.isCheckboxList_||this.isRadioList_}},{key:"setTabindexToFirstSelectedItem_",value:function(){var e=0;this.isSelectableList_()&&("number"==typeof this.selectedIndex_&&-1!==this.selectedIndex_?e=this.selectedIndex_:this.selectedIndex_ instanceof Array&&this.selectedIndex_.length>0&&(e=this.selectedIndex_.reduce(function(e,t){return Math.min(e,t)}))),this.setTabindexAtIndex_(e)}},{key:"isIndexValid_",value:function(e){var t=this;if(e instanceof Array){if(!this.isCheckboxList_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return 0===e.length||e.some(function(e){return t.isIndexInRange_(e)})}if("number"==typeof e){if(this.isCheckboxList_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+e);return this.isIndexInRange_(e)}return!1}},{key:"isIndexInRange_",value:function(e){var t=this.adapter_.getListItemCount();return e>=0&&e<t}},{key:"setSelectedIndexOnAction_",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.isCheckboxList_?this.toggleCheckboxAtIndex_(e,t):this.setSelectedIndex(e)}},{key:"toggleCheckboxAtIndex_",value:function(e,t){var n=this.adapter_.isCheckboxCheckedAtIndex(e);t&&(n=!n,this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,n)),this.adapter_.setAttributeForElementIndex(e,S.ARIA_CHECKED,n?"true":"false"),-1===this.selectedIndex_&&(this.selectedIndex_=[]),n?this.selectedIndex_.push(e):this.selectedIndex_=this.selectedIndex_.filter(function(t){return t!==e})}}]),t}(),M=function(e){function t(e){var n;return u(this,t),(n=m(this,h(t).call(this,Object.assign(t.defaultAdapter,e)))).closeAnimationEndTimerId_=0,n}return _(t,p),d(t,null,[{key:"cssClasses",get:function(){return I}},{key:"strings",get:function(){return E}},{key:"defaultAdapter",get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){},closeSurface:function(){},getElementIndex:function(){},getParentElement:function(){},getSelectedElementIndex:function(){},notifySelected:function(){}}}}]),d(t,[{key:"destroy",value:function(){this.closeAnimationEndTimerId_&&clearTimeout(this.closeAnimationEndTimerId_),this.adapter_.closeSurface()}},{key:"handleKeydown",value:function(e){var t=e.key,n=e.keyCode;("Tab"===t||9===n)&&this.adapter_.closeSurface()}},{key:"handleItemAction",value:function(e){var t=this,n=this.adapter_.getElementIndex(e);n<0||(this.adapter_.notifySelected({index:n}),this.adapter_.closeSurface(),this.closeAnimationEndTimerId_=setTimeout(function(){var i=t.getSelectionGroup_(e);null!==i&&t.handleSelectionGroup_(i,n)},v.numbers.TRANSITION_CLOSE_DURATION))}},{key:"handleSelectionGroup_",value:function(e,t){var n=this.adapter_.getSelectedElementIndex(e);n>=0&&(this.adapter_.removeAttributeFromElementAtIndex(n,E.ARIA_SELECTED_ATTR),this.adapter_.removeClassFromElementAtIndex(n,I.MENU_SELECTED_LIST_ITEM)),this.adapter_.addClassToElementAtIndex(t,I.MENU_SELECTED_LIST_ITEM),this.adapter_.addAttributeToElementAtIndex(t,E.ARIA_SELECTED_ATTR,"true")}},{key:"getSelectionGroup_",value:function(e){for(var t=this.adapter_.getParentElement(e),n=this.adapter_.elementContainsClass(t,I.MENU_SELECTION_GROUP);!n&&!this.adapter_.elementContainsClass(t,L.cssClasses.ROOT);)t=this.adapter_.getParentElement(t),n=this.adapter_.elementContainsClass(t,I.MENU_SELECTION_GROUP);return n?t:null}},{key:"getListItem_",value:function(e){for(var t=this.adapter_.elementContainsClass(e,L.cssClasses.LIST_ITEM_CLASS);!t;){if(!(e=this.adapter_.getParentElement(e)))return null;t=this.adapter_.elementContainsClass(e,L.cssClasses.LIST_ITEM_CLASS)}return e}}]),t}();var R=function(){return function(e,t){this.index=e,this.source=t}}(),F=0,w=function(){function e(e){this.elementRef=e}return e.decorators=[{type:t.Directive,args:[{selector:"[mdcMenuSelectionGroup], mdc-menu-selection-group",host:{class:"mdc-menu__selection-group"},exportAs:"mdcMenuSelectionGroup"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e}(),D=function(){function e(e){this.elementRef=e}return e.decorators=[{type:t.Directive,args:[{selector:"[mdcMenuSelectionGroupIcon], mdc-menu-selection-group-icon",host:{class:"mdc-menu__selection-group-icon"},exportAs:"mdcMenuSelectionGroupIcon"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e}(),N=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n._destroyed=new i.Subject,n._uniqueId="mdc-menu-"+ ++F,n.id=n._uniqueId,n._wrapFocus=!1,n.selected=new t.EventEmitter,n._menuFoundation=new M(n._createAdapter()),n}return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),Object.defineProperty(n.prototype,"wrapFocus",{get:function(){return this._wrapFocus},set:function(e){var t=o.toBoolean(e);t!==this._wrapFocus&&(this._wrapFocus=t,this._list.wrapFocus=t)},enumerable:!0,configurable:!0}),n.prototype._createAdapter=function(){var e=this;return Object.assign({addClassToElementAtIndex:function(t,n){return e._list.items.toArray()[t].getListItemElement().classList.add(n)},removeClassFromElementAtIndex:function(t,n){return e._list.items.toArray()[t].getListItemElement().classList.remove(n)},addAttributeToElementAtIndex:function(t,n,i){return e._list.items.toArray()[t].getListItemElement().setAttribute(n,i)},removeAttributeFromElementAtIndex:function(t,n){return e._list.items.toArray()[t].getListItemElement().removeAttribute(n)},elementContainsClass:function(e,t){return e.classList.contains(t)},closeSurface:function(){e.open=!1,e.setOpen()},getElementIndex:function(t){return e._list.items.toArray().findIndex(function(e){return e.getListItemElement()===t})},getParentElement:function(e){return e.parentElement},getSelectedElementIndex:function(t){var n=t.querySelector(".mdc-menu-item--selected");return n?e._list.items.toArray().findIndex(function(e){return e.id===n.id}):-1},notifySelected:function(t){return e.selected.emit(new R(t.index,e._list.items.toArray()[t.index]))}})},n.prototype.ngAfterContentInit=function(){var e=this;this.initMenuSurface(),this._initList(),this._listenForListItemActions(),this.opened.pipe(s.takeUntil(this._destroyed)).subscribe(function(){e._list&&e._list.focusFirstElement()})},n.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete(),this.destroyMenuSurface(),this._menuFoundation.destroy()},n.prototype.focus=function(){this._getHostElement().focus()},n.prototype._handleKeydown=function(e){this._menuFoundation.handleKeydown(e)},n.prototype._initList=function(){var e=this;this._list&&(this._list.setRole("menu"),this._list.wrapFocus=this._wrapFocus,this._list.items.changes.pipe(s.takeUntil(this._destroyed)).subscribe(function(){return e._list.items.forEach(function(e){return e.setRole("menuitem")})}))},n.prototype._listenForListItemActions=function(){var e=this;this._list.actionEvent.pipe(s.takeUntil(this._destroyed)).subscribe(function(t){return e._menuFoundation.handleItemAction(e._list.items.toArray()[t.index].getListItemElement())})},n.decorators=[{type:t.Component,args:[{selector:"mdc-menu",exportAs:"mdcMenu",host:{"[id]":"id",tabindex:"-1",class:"mdc-menu mdc-menu-surface","(keydown)":"_handleKeydown($event)"},template:"<ng-content></ng-content>",encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush}]}],n.propDecorators={id:[{type:t.Input}],wrapFocus:[{type:t.Input}],selected:[{type:t.Output}],_list:[{type:t.ContentChild,args:[r.MdcList]}]},n}(n.MdcMenuSurfaceBase),P=[N,w,D],H=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.MdcMenuSurfaceModule],exports:P.concat([n.MdcMenuSurfaceModule]),declarations:[P]}]}],e}();e.MdcMenuModule=H,e.MdcMenuSelectedEvent=R,e.MdcMenuSelectionGroup=w,e.MdcMenuSelectionGroupIcon=D,e.MdcMenu=N,Object.defineProperty(e,"__esModule",{value:!0})});