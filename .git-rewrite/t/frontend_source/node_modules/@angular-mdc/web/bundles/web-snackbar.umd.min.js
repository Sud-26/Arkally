/**
 * @license
 * Copyright (c) 2018 Dominic Carretto
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/trimox/angular-mdc-web/blob/master/LICENSE
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular-mdc/web/overlay"),require("@angular-mdc/web/portal"),require("@angular-mdc/web/button"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@angular-mdc/web/snackbar",["exports","@angular/core","@angular/common","@angular-mdc/web/overlay","@angular-mdc/web/portal","@angular-mdc/web/button","rxjs","rxjs/operators"],e):e(((t=t||self).ng=t.ng||{},t.ng.web=t.ng.web||{},t.ng.web.snackbar={}),t.ng.core,t.ng.common,t.ng.web.overlay,t.ng.web.portal,t.ng.web.button,t.rxjs,t.rxjs.operators)}(this,function(t,e,n,i,a,o,s,r){"use strict";var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var u=function(){return(u=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},l=function(){function t(t,e){this.containerInstance=t,this._overlayRef=e,this._afterDismiss=new s.Subject,this.componentInstance=t}return t.prototype.afterDismiss=function(){return this._afterDismiss.asObservable()},t.prototype.dismiss=function(t){this._afterDismiss.closed||(this._dismissedReason=t,this._finishDismiss())},t.prototype._finishDismiss=function(){this._overlayRef.dispose(),this._afterDismiss.next(this._dismissedReason),this._afterDismiss.complete()},t}(),p=new e.InjectionToken("MdcSnackbarData"),f=function(){return function(){this.data=null,this.stacked=!1,this.leading=!1,this.trailing=!1,this.direction="ltr",this.dismiss=!1,this.closeOnEscape=!0}}(),_={OPENING:"mdc-snackbar--opening",OPEN:"mdc-snackbar--open",CLOSING:"mdc-snackbar--closing"},d={SURFACE_SELECTOR:".mdc-snackbar__surface",LABEL_SELECTOR:".mdc-snackbar__label",ACTION_SELECTOR:".mdc-snackbar__action",DISMISS_SELECTOR:".mdc-snackbar__dismiss",OPENING_EVENT:"MDCSnackbar:opening",OPENED_EVENT:"MDCSnackbar:opened",CLOSING_EVENT:"MDCSnackbar:closing",CLOSED_EVENT:"MDCSnackbar:closed",REASON_ACTION:"action",REASON_DISMISS:"dismiss",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text"},m={MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,ARIA_LIVE_DELAY_MS:1e3},h=m.ARIA_LIVE_DELAY_MS,y=d.ARIA_LIVE_LABEL_TEXT_ATTR;function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=t.getAttribute("aria-live"),i=e.textContent.trim();i&&(t.setAttribute("aria-live","off"),e.textContent="",e.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',e.setAttribute(y,i),setTimeout(function(){t.setAttribute("aria-live",n),e.removeAttribute(y),e.textContent=i},h))}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t,e,n){return e&&k(t.prototype,e),n&&k(t,n),t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
var A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,t),this.adapter_=e}return C(t,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),C(t,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),t}(),E=_.OPENING,I=_.OPEN,M=_.CLOSING,D=d.REASON_ACTION,R=d.REASON_DISMISS,w=function(t){function e(t){var n;return b(this,e),(n=T(this,O(e).call(this,Object.assign(e.defaultAdapter,t)))).isOpen_=!1,n.animationFrame_=0,n.animationTimer_=0,n.autoDismissTimer_=0,n.autoDismissTimeoutMs_=m.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,n.closeOnEscape_=!0,n}return v(e,A),C(e,null,[{key:"cssClasses",get:function(){return _}},{key:"strings",get:function(){return d}},{key:"numbers",get:function(){return m}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},announce:function(){},notifyOpening:function(){},notifyOpened:function(){},notifyClosing:function(){},notifyClosed:function(){}}}}]),C(e,[{key:"destroy",value:function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter_.removeClass(E),this.adapter_.removeClass(I),this.adapter_.removeClass(M)}},{key:"open",value:function(){var t=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter_.notifyOpening(),this.adapter_.removeClass(M),this.adapter_.addClass(E),this.adapter_.announce(),this.runNextAnimationFrame_(function(){t.adapter_.addClass(I),t.animationTimer_=setTimeout(function(){t.handleAnimationTimerEnd_(),t.adapter_.notifyOpened(),t.autoDismissTimer_=setTimeout(function(){t.close(R)},t.getTimeoutMs())},m.SNACKBAR_ANIMATION_OPEN_TIME_MS)})}},{key:"close",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter_.notifyClosing(e),this.adapter_.addClass(_.CLOSING),this.adapter_.removeClass(_.OPEN),this.adapter_.removeClass(_.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout(function(){t.handleAnimationTimerEnd_(),t.adapter_.notifyClosed(e)},m.SNACKBAR_ANIMATION_CLOSE_TIME_MS))}},{key:"isOpen",value:function(){return this.isOpen_}},{key:"getTimeoutMs",value:function(){return this.autoDismissTimeoutMs_}},{key:"setTimeoutMs",value:function(t){var e=m.MIN_AUTO_DISMISS_TIMEOUT_MS,n=m.MAX_AUTO_DISMISS_TIMEOUT_MS;if(!(t<=n&&t>=e))throw new Error("timeoutMs must be an integer in the range ".concat(e,"â€“").concat(n,", but got '").concat(t,"'"));this.autoDismissTimeoutMs_=t}},{key:"getCloseOnEscape",value:function(){return this.closeOnEscape_}},{key:"setCloseOnEscape",value:function(t){this.closeOnEscape_=t}},{key:"handleKeyDown",value:function(t){!this.getCloseOnEscape()||"Escape"!==t.key&&27!==t.keyCode||this.close(R)}},{key:"handleActionButtonClick",value:function(t){this.close(D)}},{key:"handleActionIconClick",value:function(t){this.close(R)}},{key:"clearAutoDismissTimer_",value:function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0}},{key:"handleAnimationTimerEnd_",value:function(){this.animationTimer_=0,this.adapter_.removeClass(_.OPENING),this.adapter_.removeClass(_.CLOSING)}},{key:"runNextAnimationFrame_",value:function(t){var e=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame(function(){e.animationFrame_=0,clearTimeout(e.animationTimer_),e.animationTimer_=setTimeout(t,0)})}}]),e}();var N=function(){function t(t,e,n,i){this._changeDetectorRef=t,this.elementRef=e,this.snackbarRef=n,this.data=i,this._foundation=new w(this._createAdapter())}return Object.defineProperty(t.prototype,"config",{get:function(){return this.snackbarRef.componentInstance.snackbarConfig},enumerable:!0,configurable:!0}),t.prototype._createAdapter=function(){var t=this;return{addClass:function(e){return t._getHostElement().classList.add(e)},removeClass:function(e){return t._getHostElement().classList.remove(e)},announce:function(){return g(t.label.nativeElement)},notifyClosed:function(e){return t.snackbarRef.dismiss(e)}}},t.prototype.ngOnInit=function(){this._changeDetectorRef.detectChanges(),this._applyClasses(),this._applyConfig()},t.prototype.ngOnDestroy=function(){this._foundation&&this._foundation.destroy()},t.prototype._onKeydown=function(t){this._foundation.handleKeyDown(t)},t.prototype._onActionClick=function(t){this._foundation.handleActionButtonClick(t)},t.prototype._onActionIconClick=function(t){this._foundation.handleActionIconClick(t)},t.prototype.open=function(){this._foundation.open()},t.prototype.close=function(t){this._foundation.close(t)},t.prototype._applyClasses=function(){var t,e,n,i=this.config.classes;i&&(i instanceof Array?(t=this._getHostElement().classList).add.apply(t,this.config.classes):this._getHostElement().classList.toggle(i));var a=this.config.actionClasses;if(a&&this.action&&(a instanceof Array?(e=this.action.nativeElement.classList).add.apply(e,this.config.actionClasses):this.action.nativeElement.classList.toggle(a)),this.dismiss){var o=this.config.dismissClasses;o&&(o instanceof Array?(n=this.dismiss.nativeElement.classList).add.apply(n,this.config.dismissClasses):this.dismiss.nativeElement.classList.toggle(o))}},t.prototype._applyConfig=function(){this.config.timeoutMs&&this._foundation.setTimeoutMs(this.config.timeoutMs),this.config.dismiss&&this._foundation.setCloseOnEscape(!!this.config.closeOnEscape)},t.prototype._getHostElement=function(){return this.elementRef.nativeElement},t.decorators=[{type:e.Component,args:[{selector:"mdc-snackbar",host:{class:"mdc-snackbar","[dir]":"this.config.direction","[class.mdc-snackbar--stacked]":"config.stacked","[class.mdc-snackbar--leading]":"config.leading","[class.ngx-mdc-snackbar--trailing]":"config.trailing","(keydown)":"_onKeydown($event)"},template:'\n  <div #surface class="mdc-snackbar__surface">\n    <div #label class="mdc-snackbar__label"\n      role="status"\n      aria-live="polite">{{data.message}}</div>\n    <div class="mdc-snackbar__actions" *ngIf="data.action">\n      <button #action type="button" class="mdc-button mdc-snackbar__action"\n        (click)="_onActionClick($event)">{{data.action}}</button>\n      <button #dismiss *ngIf="config.dismiss"\n        class="mdc-icon-button mdc-snackbar__dismiss material-icons"\n        title="Dismiss" (click)="_onActionIconClick($event)">close</button>\n    </div>\n  </div>',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],t.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:e.ElementRef},{type:l},{type:void 0,decorators:[{type:e.Inject,args:[p]}]}]},t.propDecorators={label:[{type:e.ViewChild,args:["label"]}],action:[{type:e.ViewChild,args:["action"]}],dismiss:[{type:e.ViewChild,args:["dismiss"]}]},t}(),j=function(t){function n(e,n){var i=t.call(this)||this;return i._ngZone=e,i.snackbarConfig=n,i._onExit=new s.Subject,i}return function(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(n,t),n.prototype.attachComponentPortal=function(t){return this._portalOutlet.attachComponentPortal(t)},n.prototype.attachTemplatePortal=function(t){return this._portalOutlet.attachTemplatePortal(t)},n.prototype.ngOnDestroy=function(){this._completeExit()},n.prototype._completeExit=function(){var t=this;this._ngZone.onMicrotaskEmpty.asObservable().pipe(r.take(1)).subscribe(function(){t._onExit.next(),t._onExit.complete()})},n.decorators=[{type:e.Component,args:[{selector:"mdc-snackbar-container",template:"<ng-template cdkPortalOutlet></ng-template>",changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:e.NgZone},{type:f}]},n.propDecorators={_portalOutlet:[{type:e.ViewChild,args:[a.CdkPortalOutlet]}]},n}(a.BasePortalOutlet),L=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,i.OverlayModule,a.PortalModule,o.MdcButtonModule],exports:[j],declarations:[j,N],entryComponents:[j,N]}]}],t}(),P=new e.InjectionToken("mdc-snackbar-default-options",{providedIn:"root",factory:x});function x(){return new f}var B=function(){function t(t,e,n,i){this._overlay=t,this._injector=e,this._parentSnackBar=n,this._defaultConfig=i,this._snackBarRefAtThisLevel=null}return Object.defineProperty(t.prototype,"_openedSnackbarRef",{get:function(){var t=this._parentSnackBar;return t?t._openedSnackbarRef:this._snackBarRefAtThisLevel},set:function(t){this._parentSnackBar?this._parentSnackBar._openedSnackbarRef=t:this._snackBarRefAtThisLevel=t},enumerable:!0,configurable:!0}),t.prototype.openFromComponent=function(t,e){return this._attach(t,e)},t.prototype.open=function(t,e,n){void 0===e&&(e="");var i=u({},this._defaultConfig,n);return i.data={message:t,action:e},this.openFromComponent(N,i)},t.prototype.dismiss=function(){this._openedSnackbarRef&&(this._openedSnackbarRef.instance instanceof N&&this._openedSnackbarRef.instance.close(),this._openedSnackbarRef.dismiss())},t.prototype.ngOnDestroy=function(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()},t.prototype._attachSnackbarContainer=function(t,e){var n=e&&e.viewContainerRef&&e.viewContainerRef.injector,i=new a.PortalInjector(n||this._injector,new WeakMap([[f,e]])),o=new a.ComponentPortal(j,e.viewContainerRef,i),s=t.attach(o);return s.instance.snackbarConfig=e,s.instance},t.prototype._attach=function(t,e){var n=u({},new f,this._defaultConfig,e),i=this._createOverlay(),o=this._attachSnackbarContainer(i,n),s=new l(o,i),r=this._createInjector(n,s),c=new a.ComponentPortal(t,void 0,r),p=o.attachComponentPortal(c);return s.instance=p.instance,this._loadListeners(s),this._openedSnackbarRef=s,s.instance instanceof N&&s.instance.open(),this._openedSnackbarRef},t.prototype._loadListeners=function(t){var e=this;t.afterDismiss().subscribe(function(){e._openedSnackbarRef===t&&(e._openedSnackbarRef=null)}),this._openedSnackbarRef&&this._openedSnackbarRef.dismiss()},t.prototype._createOverlay=function(){return this._overlay.create()},t.prototype._createInjector=function(t,e){var n=t&&t.viewContainerRef&&t.viewContainerRef.injector;return new a.PortalInjector(n||this._injector,new WeakMap([[l,e],[p,t.data]]))},t.decorators=[{type:e.Injectable,args:[{providedIn:L}]}],t.ctorParameters=function(){return[{type:i.Overlay},{type:e.Injector},{type:t,decorators:[{type:e.Optional},{type:e.SkipSelf}]},{type:f,decorators:[{type:e.Inject,args:[P]}]}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(i.Overlay),e.inject(e.INJECTOR),e.inject(t,12),e.inject(P))},token:t,providedIn:L}),t}();t.MdcSnackbarModule=L,t.MdcSnackbarContainer=j,t.MDC_SNACKBAR_DATA=p,t.MdcSnackbarConfig=f,t.MdcSnackbarRef=l,t.MdcSnackbarComponent=N,t.MDC_SNACKBAR_DEFAULT_OPTIONS_FACTORY=x,t.MDC_SNACKBAR_DEFAULT_OPTIONS=P,t.MdcSnackbar=B,Object.defineProperty(t,"__esModule",{value:!0})});