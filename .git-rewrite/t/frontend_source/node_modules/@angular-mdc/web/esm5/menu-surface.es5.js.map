{"version":3,"file":"menu-surface.es5.js","sources":["../../../packages/menu-surface/menu-surface-module.ts","../../../packages/menu-surface/menu-surface-anchor.ts","../../../packages/menu-surface/menu-surface.ts","../../../packages/menu-surface/menu-surface-base.ts","../../../node_modules/@material/menu-surface/index.js","../../../node_modules/@material/menu-surface/foundation.js","../../../node_modules/@material/menu-surface/adapter.js","../../../node_modules/@material/base/component.js","../../../node_modules/@material/base/foundation.js","../../../node_modules/@material/menu-surface/constants.js","../../../node_modules/@material/menu-surface/util.js"],"sourcesContent":["import { NgModule } from '@angular/core';\r\n\r\nimport { MdcMenuSurface } from './menu-surface';\r\nimport { MdcMenuSurfaceAnchor } from './menu-surface-anchor';\r\n\r\nconst MENU_SURFACE_DECLARATIONS = [\r\n  MdcMenuSurface,\r\n  MdcMenuSurfaceAnchor\r\n];\r\n\r\n@NgModule({\r\n  exports: [MENU_SURFACE_DECLARATIONS],\r\n  declarations: [MENU_SURFACE_DECLARATIONS]\r\n})\r\nexport class MdcMenuSurfaceModule { }\r\n","import {\r\n  Directive,\r\n  ElementRef\r\n} from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[mdcMenuSurfaceAnchor], mdc-menu-surface-anchor',\r\n  host: { 'class': 'mdc-menu-surface--anchor' }\r\n})\r\nexport class MdcMenuSurfaceAnchor {\r\n  constructor(public elementRef: ElementRef<HTMLElement>) { }\r\n}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  OnDestroy,\r\n  OnInit,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\n\r\nimport { MdcMenuSurfaceBase } from './menu-surface-base';\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'mdc-menu-surface',\r\n  exportAs: 'mdcMenuSurface',\r\n  host: { 'class': 'mdc-menu-surface' },\r\n  template: '<ng-content></ng-content>',\r\n  encapsulation: ViewEncapsulation.None,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class MdcMenuSurface extends MdcMenuSurfaceBase implements OnInit, OnDestroy {\r\n  ngOnInit(): void {\r\n    this.initMenuSurface();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroyMenuSurface();\r\n  }\r\n}\r\n","import {\r\n  ChangeDetectorRef,\r\n  ElementRef,\r\n  EventEmitter,\r\n  NgZone,\r\n  Input,\r\n  Optional,\r\n  Output\r\n} from '@angular/core';\r\nimport { fromEvent, Subject, Subscription } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nimport { Platform, toBoolean } from '@angular-mdc/web/common';\r\n\r\nimport { getTransformPropertyName } from '@material/menu-surface/util';\r\nimport { Corner, strings } from '@material/menu-surface/constants';\r\nimport { MDCMenuSurfaceFoundation } from '@material/menu-surface/index';\r\n\r\nexport interface MdcMenuSurfaceOpenedEvent {\r\n  detail: string;\r\n}\r\n\r\nexport interface AnchorMargin {\r\n  top?: number;\r\n  right?: number;\r\n  bottom?: number;\r\n  left?: number;\r\n}\r\n\r\nexport interface Coordinates {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport type AnchorCorner = 'bottomEnd' | 'bottomStart' | 'topEnd' | 'topStart';\r\n\r\nconst ANCHOR_CORNER_MAP = {\r\n  bottomEnd: Corner.BOTTOM_END,\r\n  bottomStart: Corner.BOTTOM_START,\r\n  topEnd: Corner.TOP_END,\r\n  topStart: Corner.TOP_START\r\n};\r\n\r\nexport abstract class MdcMenuSurfaceBase {\r\n  /** Emits whenever the component is destroyed. */\r\n  private _destroy = new Subject<void>();\r\n\r\n  private _previousFocus: Element | null = null;\r\n  private _firstFocusableElement: Element | null = null;\r\n  private _lastFocusableElement: Element | null = null;\r\n\r\n  @Input()\r\n  get open(): boolean { return this._open; }\r\n  set open(value: boolean) {\r\n    this._open = toBoolean(value);\r\n    this.setOpen();\r\n  }\r\n  private _open: boolean = false;\r\n\r\n  @Input()\r\n  get anchorElement(): Element | null { return this._anchorElement; }\r\n  set anchorElement(element: Element | null) {\r\n    this._anchorElement = element;\r\n  }\r\n  private _anchorElement: Element | null = null;\r\n\r\n  @Input()\r\n  get anchorCorner(): AnchorCorner { return this._anchorCorner; }\r\n  set anchorCorner(value: AnchorCorner) {\r\n    this._anchorCorner = value || 'topStart';\r\n    this._foundation.setAnchorCorner([ANCHOR_CORNER_MAP[this._anchorCorner]]);\r\n  }\r\n  private _anchorCorner: AnchorCorner = 'topStart';\r\n\r\n  @Input()\r\n  get quickOpen(): boolean { return this._quickOpen; }\r\n  set quickOpen(value: boolean) {\r\n    this._quickOpen = toBoolean(value);\r\n    this._foundation.setQuickOpen(this._quickOpen);\r\n  }\r\n  private _quickOpen: boolean = false;\r\n\r\n  @Input()\r\n  get fixed(): boolean { return this._fixed; }\r\n  set fixed(value: boolean) {\r\n    this._fixed = toBoolean(value);\r\n    this._fixed ? this._getHostElement().classList.add('mdc-menu-surface--fixed') :\r\n      this._getHostElement().classList.remove('mdc-menu-surface--fixed');\r\n    this._foundation.setFixedPosition(this._fixed);\r\n  }\r\n  private _fixed: boolean = false;\r\n\r\n  @Input()\r\n  get coordinates(): Coordinates { return this._coordinates; }\r\n  set coordinates(value: Coordinates) {\r\n    this._coordinates = value;\r\n    this._foundation.setAbsolutePosition(value.x, value.y);\r\n  }\r\n  private _coordinates: Coordinates = { x: 0, y: 0 };\r\n\r\n  @Input()\r\n  get anchorMargin(): AnchorMargin { return this._anchorMargin; }\r\n  set anchorMargin(value: AnchorMargin) {\r\n    this._anchorMargin = value;\r\n    this._foundation.setAnchorMargin(this._anchorMargin);\r\n  }\r\n  private _anchorMargin: AnchorMargin = {};\r\n\r\n  @Input()\r\n  get hoistToBody(): boolean { return this._hoistToBody; }\r\n  set hoistToBody(value: boolean) {\r\n    this._hoistToBody = toBoolean(value);\r\n    if (this._hoistToBody) {\r\n      this.setHoistToBody();\r\n    }\r\n  }\r\n  private _hoistToBody: boolean = false;\r\n\r\n  /** Emits an event whenever the menu surface is opened. */\r\n  @Output() readonly opened: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  /** Emits an event whenever the menu surface is closed. */\r\n  @Output() readonly closed: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  /** Subscription to interaction events in menu-surface. */\r\n  private _windowClickSubscription: Subscription | null = null;\r\n\r\n  protected _createSurfaceAdapter() {\r\n    return Object.assign({\r\n      addClass: (className: string) => this._getHostElement().classList.add(className),\r\n      removeClass: (className: string) => this._getHostElement().classList.remove(className),\r\n      hasClass: (className: string) => this._getHostElement().classList.contains(className),\r\n      hasAnchor: () => !!this.anchorElement,\r\n      notifyClose: () => {\r\n        this.closed.emit();\r\n        this._deregisterWindowClickListener();\r\n      },\r\n      notifyOpen: () => {\r\n        this.opened.emit();\r\n        this._registerWindowClickListener();\r\n      },\r\n      isElementInContainer: (el: Element) => this._getHostElement() === el || this._getHostElement().contains(el),\r\n      isRtl: () => {\r\n        if (!this.platform.isBrowser) { return; }\r\n\r\n        return window.getComputedStyle(this._getHostElement()).getPropertyValue('direction') === 'rtl';\r\n      },\r\n      setTransformOrigin: (origin: string) => {\r\n        if (!this.platform.isBrowser) { return; }\r\n\r\n        this._getHostElement().style[`${getTransformPropertyName(window)}-origin` as any] = origin;\r\n      }\r\n    },\r\n      this._getFocusAdaptermethods(),\r\n      this._getDimensionAdapterMethods()\r\n    );\r\n  }\r\n\r\n  private _getFocusAdaptermethods() {\r\n    return {\r\n      isFocused: () => this.platform.isBrowser ? document.activeElement! === this._getHostElement() : false,\r\n      saveFocus: () => {\r\n        if (!this.platform.isBrowser) { return; }\r\n        this._previousFocus = document.activeElement!;\r\n      },\r\n      restoreFocus: () => {\r\n        if (!this.platform.isBrowser) { return; }\r\n\r\n        if (this._getHostElement().contains(document.activeElement!)) {\r\n          if (this._previousFocus && (<any>this._previousFocus).focus) {\r\n            (<any>this._previousFocus).focus();\r\n          }\r\n        }\r\n      },\r\n      isFirstElementFocused: () => {\r\n        if (!this.platform.isBrowser) { return false; }\r\n        return this._firstFocusableElement && this._firstFocusableElement === document.activeElement!;\r\n      },\r\n      isLastElementFocused: () => {\r\n        if (!this.platform.isBrowser) { return false; }\r\n        return this._lastFocusableElement && this._lastFocusableElement === document.activeElement!;\r\n      },\r\n      focusFirstElement: () => {\r\n        if (!this.platform.isBrowser) { return; }\r\n\r\n        if (this._firstFocusableElement) {\r\n          (<any>this._firstFocusableElement).focus();\r\n        }\r\n      },\r\n      focusLastElement: () => {\r\n        if (!this.platform.isBrowser) { return; }\r\n\r\n        if (this._lastFocusableElement) {\r\n          (<any>this._lastFocusableElement).focus();\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  private _getDimensionAdapterMethods() {\r\n    return {\r\n      getInnerDimensions: () => {\r\n        return { width: this._getHostElement().offsetWidth, height: this._getHostElement().offsetHeight };\r\n      },\r\n      getAnchorDimensions: () => {\r\n        if (!this.platform.isBrowser) { return; }\r\n\r\n        return this._anchorElement && this._anchorElement.getBoundingClientRect();\r\n      },\r\n      getWindowDimensions: () => {\r\n        return {\r\n          width: this.platform.isBrowser ? window.innerWidth : 0,\r\n          height: this.platform.isBrowser ? window.innerHeight : 0\r\n        };\r\n      },\r\n      getBodyDimensions: () => {\r\n        return {\r\n          width: this.platform.isBrowser ? document.body!.clientWidth : 0,\r\n          height: this.platform.isBrowser ? document.body!.clientHeight : 0\r\n        };\r\n      },\r\n      getWindowScroll: () => {\r\n        return {\r\n          x: this.platform.isBrowser ? window.pageXOffset : 0,\r\n          y: this.platform.isBrowser ? window.pageYOffset : 0\r\n        };\r\n      },\r\n      setPosition: (position: { left: string, right: string, top: string, bottom: string }) => {\r\n        this._getHostElement().style.left = 'left' in position ? position.left : null;\r\n        this._getHostElement().style.right = 'right' in position ? position.right : null;\r\n        this._getHostElement().style.top = 'top' in position ? position.top : null;\r\n        this._getHostElement().style.bottom = 'bottom' in position ? position.bottom : null;\r\n      },\r\n      setMaxHeight: (height: string) => this._getHostElement().style.maxHeight = height\r\n    };\r\n  }\r\n\r\n  private _foundation: {\r\n    init(): void,\r\n    destroy(): void,\r\n    open(): void,\r\n    close(): void,\r\n    isOpen(): boolean,\r\n    setAnchorCorner(corner: any): void,\r\n    setAnchorMargin(margin: AnchorMargin): void,\r\n    setIsHoisted(isHoisted: boolean): void,\r\n    setFixedPosition(isFixedPosition: boolean): void,\r\n    setAbsolutePosition(x: number, y: number): void,\r\n    setQuickOpen(quickOpen: boolean): void,\r\n    handleBodyClick(evt: MouseEvent): void,\r\n    handleKeydown(evt: KeyboardEvent): void\r\n  } = new MDCMenuSurfaceFoundation(this._createSurfaceAdapter());\r\n\r\n  constructor(\r\n    public changeDetectorRef: ChangeDetectorRef,\r\n    public platform: Platform,\r\n    @Optional() private _ngZone: NgZone,\r\n    public elementRef: ElementRef<HTMLElement>) { }\r\n\r\n  protected initMenuSurface(): void {\r\n    this._foundation.init();\r\n    this._registerKeydownListener();\r\n  }\r\n\r\n  protected destroyMenuSurface(): void {\r\n    this._destroy.next();\r\n    this._destroy.complete();\r\n\r\n    this._deregisterWindowClickListener();\r\n\r\n    // add platform check due to use of cancelAnimationFrame inside destroy()\r\n    if (this.platform.isBrowser) {\r\n      this._foundation.destroy();\r\n    }\r\n\r\n    if (this.hoistToBody) {\r\n      document.body!.removeChild(this._getHostElement());\r\n    }\r\n  }\r\n\r\n  protected setOpen(): void {\r\n    if (this._open) {\r\n      const focusableElements = this._getHostElement().querySelectorAll(strings.FOCUSABLE_ELEMENTS);\r\n      this._firstFocusableElement = focusableElements.length > 0 ? focusableElements[0] : null;\r\n      this._lastFocusableElement = focusableElements.length > 0 ?\r\n        focusableElements[focusableElements.length - 1] : null;\r\n\r\n      this._foundation.open();\r\n    } else {\r\n      this._foundation.close();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes the menu-surface from it's current location and appends it to the\r\n   * body to overcome any overflow:hidden issues.\r\n   */\r\n  protected setHoistToBody(): void {\r\n    if (!this.platform.isBrowser) { return; }\r\n\r\n    const parentEl = this._getHostElement().parentElement;\r\n    if (parentEl) {\r\n      document.body!.appendChild(parentEl.removeChild(this._getHostElement()));\r\n      this._foundation.setIsHoisted(true);\r\n    }\r\n  }\r\n\r\n  private _registerKeydownListener(): void {\r\n    this._ngZone.runOutsideAngular(() =>\r\n      fromEvent<KeyboardEvent>(this._getHostElement(), 'keydown').pipe(takeUntil(this._destroy))\r\n        .subscribe(evt => this._ngZone.run(() => this._foundation.handleKeydown(evt))));\r\n  }\r\n\r\n  private _registerWindowClickListener(): void {\r\n    if (!this.platform.isBrowser) { return; }\r\n\r\n    this._windowClickSubscription =\r\n      this._ngZone.runOutsideAngular(() =>\r\n        fromEvent<MouseEvent>(window, 'click')\r\n          .subscribe(evt => this._ngZone.run(() => {\r\n            this._foundation.handleBodyClick(evt);\r\n            this._open = this._foundation.isOpen();\r\n          })));\r\n  }\r\n\r\n  private _deregisterWindowClickListener(): void {\r\n    if (this._windowClickSubscription) {\r\n      this._windowClickSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  /** Retrieves the DOM element of the component host. */\r\n  protected _getHostElement(): HTMLElement {\r\n    return this.elementRef.nativeElement;\r\n  }\r\n}\r\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nimport MDCComponent from '@material/base/component';\nimport * as util from './util';\nimport {MDCMenuSurfaceFoundation, AnchorMargin} from './foundation';\nimport {MDCMenuSurfaceAdapter} from './adapter';\nimport {Corner, CornerBit, strings, cssClasses} from './constants';\n\n/**\n * @extends MDCComponent<!MDCMenuSurfaceFoundation>\n */\nclass MDCMenuSurface extends MDCComponent {\n  /** @param {...?} args */\n  constructor(...args) {\n    super(...args);\n\n    /** @private {!Element} */\n    this.previousFocus_;\n    /** @private {!Element} */\n    this.anchorElement;\n    /** @private {Element} */\n    this.firstFocusableElement_;\n    /** @private {Element} */\n    this.lastFocusableElement_;\n    /** @private {!Function} */\n    this.handleKeydown_;\n    /** @private {!Function} */\n    this.handleBodyClick_;\n    /** @private {!Function} */\n    this.registerBodyClickListener_;\n    /** @private {!Function} */\n    this.deregisterBodyClickListener_;\n  }\n\n  /**\n   * @param {!Element} root\n   * @return {!MDCMenuSurface}\n   */\n  static attachTo(root) {\n    return new MDCMenuSurface(root);\n  }\n\n  initialSyncWithDOM() {\n    if (this.root_.parentElement && this.root_.parentElement.classList.contains(cssClasses.ANCHOR)) {\n      this.anchorElement = this.root_.parentElement;\n    }\n\n    if (this.root_.classList.contains(cssClasses.FIXED)) {\n      this.setFixedPosition(true);\n    }\n\n    this.handleKeydown_ = (evt) => this.foundation_.handleKeydown(evt);\n    this.handleBodyClick_ = (evt) => this.foundation_.handleBodyClick(evt);\n\n    this.registerBodyClickListener_ = () => document.body.addEventListener('click', this.handleBodyClick_);\n    this.deregisterBodyClickListener_ = () => document.body.removeEventListener('click', this.handleBodyClick_);\n\n    this.root_.addEventListener('keydown', this.handleKeydown_);\n    this.root_.addEventListener(strings.OPENED_EVENT, this.registerBodyClickListener_);\n    this.root_.addEventListener(strings.CLOSED_EVENT, this.deregisterBodyClickListener_);\n  }\n\n  destroy() {\n    this.root_.removeEventListener('keydown', this.handleKeydown_);\n    this.root_.removeEventListener(strings.OPENED_EVENT, this.registerBodyClickListener_);\n    this.root_.removeEventListener(strings.CLOSED_EVENT, this.deregisterBodyClickListener_);\n    super.destroy();\n  }\n\n  /** @return {boolean} */\n  get open() {\n    return this.foundation_.isOpen();\n  }\n\n  /** @param {boolean} value */\n  set open(value) {\n    if (value) {\n      const focusableElements = this.root_.querySelectorAll(strings.FOCUSABLE_ELEMENTS);\n      this.firstFocusableElement_ = focusableElements.length > 0 ? focusableElements[0] : null;\n      this.lastFocusableElement_ = focusableElements.length > 0 ?\n        focusableElements[focusableElements.length - 1] : null;\n      this.foundation_.open();\n    } else {\n      this.foundation_.close();\n    }\n  }\n\n  /**\n   * Removes the menu-surface from it's current location and appends it to the\n   * body to overcome any overflow:hidden issues.\n   */\n  hoistMenuToBody() {\n    document.body.appendChild(this.root_.parentElement.removeChild(this.root_));\n    this.setIsHoisted(true);\n  }\n\n  /**\n   * Sets the foundation to use page offsets for an positioning when the menu\n   * is hoisted to the body.\n   * @param {boolean} isHoisted\n   */\n  setIsHoisted(isHoisted) {\n    this.foundation_.setIsHoisted(isHoisted);\n  }\n\n  /**\n   * Sets the element that the menu-surface is anchored to.\n   * @param {!Element} element\n   */\n  setMenuSurfaceAnchorElement(element) {\n    this.anchorElement = element;\n  }\n\n  /**\n   * Sets the menu-surface to position: fixed.\n   * @param {boolean} isFixed\n   */\n  setFixedPosition(isFixed) {\n    if (isFixed) {\n      this.root_.classList.add(cssClasses.FIXED);\n    } else {\n      this.root_.classList.remove(cssClasses.FIXED);\n    }\n\n    this.foundation_.setFixedPosition(isFixed);\n  }\n\n  /**\n   * Sets the absolute x/y position to position based on. Requires the menu to be hoisted.\n   * @param {number} x\n   * @param {number} y\n   */\n  setAbsolutePosition(x, y) {\n    this.foundation_.setAbsolutePosition(x, y);\n    this.setIsHoisted(true);\n  }\n\n  /**\n   * @param {!Corner} corner Default anchor corner alignment of top-left\n   *     surface corner.\n   */\n  setAnchorCorner(corner) {\n    this.foundation_.setAnchorCorner(corner);\n  }\n\n  /**\n   * @param {!AnchorMargin} margin\n   */\n  setAnchorMargin(margin) {\n    this.foundation_.setAnchorMargin(margin);\n  }\n\n  /** @param {boolean} quickOpen */\n  set quickOpen(quickOpen) {\n    this.foundation_.setQuickOpen(quickOpen);\n  }\n\n  /** @return {!MDCMenuSurfaceFoundation} */\n  getDefaultFoundation() {\n    return new MDCMenuSurfaceFoundation(\n      /** @type {!MDCMenuSurfaceAdapter} */ (Object.assign({\n        addClass: (className) => this.root_.classList.add(className),\n        removeClass: (className) => this.root_.classList.remove(className),\n        hasClass: (className) => this.root_.classList.contains(className),\n        hasAnchor: () => !!this.anchorElement,\n        notifyClose: () => this.emit(MDCMenuSurfaceFoundation.strings.CLOSED_EVENT, {}),\n        notifyOpen: () => this.emit(MDCMenuSurfaceFoundation.strings.OPENED_EVENT, {}),\n        isElementInContainer: (el) => this.root_ === el || this.root_.contains(el),\n        isRtl: () => getComputedStyle(this.root_).getPropertyValue('direction') === 'rtl',\n        setTransformOrigin: (origin) => {\n          this.root_.style[`${util.getTransformPropertyName(window)}-origin`] = origin;\n        },\n      },\n      this.getFocusAdapterMethods_(),\n      this.getDimensionAdapterMethods_())\n      ));\n  }\n\n  /**\n   * @return {!{\n   * isFocused: function(): boolean,\n   * saveFocus: function(),\n   * restoreFocus: function(),\n   * isFirstElementFocused: function(): boolean,\n   * isLastElementFocused: function(): boolean,\n   * focusFirstElement: function(),\n   * focusLastElement: function(),\n   * }}\n   * @private\n   */\n  getFocusAdapterMethods_() {\n    return {\n      isFocused: () => document.activeElement === this.root_,\n      saveFocus: () => {\n        this.previousFocus_ = document.activeElement;\n      },\n      restoreFocus: () => {\n        if (this.root_.contains(document.activeElement)) {\n          if (this.previousFocus_ && this.previousFocus_.focus) {\n            this.previousFocus_.focus();\n          }\n        }\n      },\n      isFirstElementFocused: () =>\n        this.firstFocusableElement_ && this.firstFocusableElement_ === document.activeElement,\n      isLastElementFocused: () =>\n        this.lastFocusableElement_ && this.lastFocusableElement_ === document.activeElement,\n      focusFirstElement: () =>\n        this.firstFocusableElement_ && this.firstFocusableElement_.focus && this.firstFocusableElement_.focus(),\n      focusLastElement: () =>\n        this.lastFocusableElement_ && this.lastFocusableElement_.focus && this.lastFocusableElement_.focus(),\n    };\n  }\n\n  /**\n   * @return {!{\n   * getInnerDimensions: function(),\n   * getAnchorDimensions: function(): (HTMLElement | null | * | ClientRect),\n   * getWindowDimensions: function(),\n   * setPosition: function(*),\n   * setMaxHeight: function(string)}}\n   * @private\n   */\n  getDimensionAdapterMethods_() {\n    return {\n      getInnerDimensions: () => {\n        return {width: this.root_.offsetWidth, height: this.root_.offsetHeight};\n      },\n      getAnchorDimensions: () => this.anchorElement && this.anchorElement.getBoundingClientRect(),\n      getWindowDimensions: () => {\n        return {width: window.innerWidth, height: window.innerHeight};\n      },\n      getBodyDimensions: () => {\n        return {width: document.body.clientWidth, height: document.body.clientHeight};\n      },\n      getWindowScroll: () => {\n        return {x: window.pageXOffset, y: window.pageYOffset};\n      },\n      setPosition: (position) => {\n        this.root_.style.left = 'left' in position ? position.left : null;\n        this.root_.style.right = 'right' in position ? position.right : null;\n        this.root_.style.top = 'top' in position ? position.top : null;\n        this.root_.style.bottom = 'bottom' in position ? position.bottom : null;\n      },\n      setMaxHeight: (height) => {\n        this.root_.style.maxHeight = height;\n      },\n    };\n  }\n}\n\nexport {MDCMenuSurfaceFoundation, MDCMenuSurface, AnchorMargin, Corner, CornerBit, util};\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * @typedef {{\n *   top: number,\n *   right: number,\n *   bottom: number,\n *   left: number\n * }}\n */\nlet AnchorMargin;\n\n/* eslint-disable no-unused-vars */\n/**\n * @typedef {{\n *   viewport: { width: number, height: number },\n *   viewportDistance: {top: number, right: number, bottom: number, left: number},\n *   anchorHeight: number,\n *   anchorWidth: number,\n *   surfaceHeight: number,\n *   surfaceWidth: number,\n *   bodyDimensions,\n *   windowScroll,\n * }}\n */\nlet AutoLayoutMeasurements;\n/* eslint-enable no-unused-vars */\n\nimport MDCFoundation from '@material/base/foundation';\nimport {MDCMenuSurfaceAdapter} from './adapter';\nimport {cssClasses, strings, numbers, Corner, CornerBit} from './constants';\n\n/**\n * @extends {MDCFoundation<!MDCMenuSurfaceAdapter>}\n */\nclass MDCMenuSurfaceFoundation extends MDCFoundation {\n  /** @return enum{cssClasses} */\n  static get cssClasses() {\n    return cssClasses;\n  }\n\n  /** @return enum{string} */\n  static get strings() {\n    return strings;\n  }\n\n  /** @return enum {number} */\n  static get numbers() {\n    return numbers;\n  }\n\n  /** @return enum{number} */\n  static get Corner() {\n    return Corner;\n  }\n\n  /**\n   * {@see MDCMenuSurfaceAdapter} for typing information on parameters and return\n   * types.\n   * @return {!MDCMenuSurfaceAdapter}\n   */\n  static get defaultAdapter() {\n    return /** @type {!MDCMenuSurfaceAdapter} */ ({\n      addClass: () => {},\n      removeClass: () => {},\n      hasClass: () => false,\n      hasAnchor: () => false,\n      notifyClose: () => {},\n      notifyOpen: () => {},\n      isElementInContainer: () => false,\n      isRtl: () => false,\n      setTransformOrigin: () => {},\n      isFocused: () => false,\n      saveFocus: () => {},\n      restoreFocus: () => {},\n      isFirstElementFocused: () => {},\n      isLastElementFocused: () => {},\n      focusFirstElement: () => {},\n      focusLastElement: () => {},\n      getInnerDimensions: () => ({}),\n      getAnchorDimensions: () => ({}),\n      getWindowDimensions: () => ({}),\n      getBodyDimensions: () => ({}),\n      getWindowScroll: () => ({}),\n      setPosition: () => {},\n      setMaxHeight: () => {},\n    });\n  }\n\n  /** @param {!MDCMenuSurfaceAdapter} adapter */\n  constructor(adapter) {\n    super(Object.assign(MDCMenuSurfaceFoundation.defaultAdapter, adapter));\n\n    /** @private {boolean} */\n    this.isOpen_ = false;\n    /** @private {number} */\n    this.openAnimationEndTimerId_ = 0;\n    /** @private {number} */\n    this.closeAnimationEndTimerId_ = 0;\n    /** @private {number} */\n    this.animationRequestId_ = 0;\n    /** @private {!{ width: number, height: number }} */\n    this.dimensions_;\n    /** @private {!Corner} */\n    this.anchorCorner_ = Corner.TOP_START;\n    /** @private {!AnchorMargin} */\n    this.anchorMargin_ = {top: 0, right: 0, bottom: 0, left: 0};\n    /** @private {?AutoLayoutMeasurements} */\n    this.measures_ = null;\n    /** @private {boolean} */\n    this.quickOpen_ = false;\n    /** @private {boolean} */\n    this.hoistedElement_ = false;\n    /** @private {boolean} */\n    this.isFixedPosition_ = false;\n    /** @private {!{x: number, y: number}} */\n    this.position_ = {x: 0, y: 0};\n  }\n\n  init() {\n    const {ROOT, OPEN} = MDCMenuSurfaceFoundation.cssClasses;\n\n    if (!this.adapter_.hasClass(ROOT)) {\n      throw new Error(`${ROOT} class required in root element.`);\n    }\n\n    if (this.adapter_.hasClass(OPEN)) {\n      this.isOpen_ = true;\n    }\n  }\n\n  destroy() {\n    clearTimeout(this.openAnimationEndTimerId_);\n    clearTimeout(this.closeAnimationEndTimerId_);\n    // Cancel any currently running animations.\n    cancelAnimationFrame(this.animationRequestId_);\n  }\n\n  /**\n   * @param {!Corner} corner Default anchor corner alignment of top-left menu surface corner.\n   */\n  setAnchorCorner(corner) {\n    this.anchorCorner_ = corner;\n  }\n\n  /**\n   * @param {!AnchorMargin} margin set of margin values from anchor.\n   */\n  setAnchorMargin(margin) {\n    this.anchorMargin_.top = typeof margin.top === 'number' ? margin.top : 0;\n    this.anchorMargin_.right = typeof margin.right === 'number' ? margin.right : 0;\n    this.anchorMargin_.bottom = typeof margin.bottom === 'number' ? margin.bottom : 0;\n    this.anchorMargin_.left = typeof margin.left === 'number' ? margin.left : 0;\n  }\n\n  /**\n   * Used to indicate if the menu-surface is hoisted to the body.\n   * @param {boolean} isHoisted\n   */\n  setIsHoisted(isHoisted) {\n    this.hoistedElement_ = isHoisted;\n  }\n\n  /**\n   * Used to set the menu-surface calculations based on a fixed position menu.\n   * @param {boolean} isFixedPosition\n   */\n  setFixedPosition(isFixedPosition) {\n    this.isFixedPosition_ = isFixedPosition;\n  }\n\n  /**\n   * Sets the menu-surface position on the page.\n   * @param {number} x\n   * @param {number} y\n   */\n  setAbsolutePosition(x, y) {\n    this.position_.x = this.typeCheckisFinite_(x) ? x : 0;\n    this.position_.y = this.typeCheckisFinite_(y) ? y : 0;\n  }\n\n  /** @param {boolean} quickOpen */\n  setQuickOpen(quickOpen) {\n    this.quickOpen_ = quickOpen;\n  }\n\n  /**\n   * Handle clicks and close if not within menu-surface element.\n   * @param {!Event} evt\n   */\n  handleBodyClick(evt) {\n    const el = evt.target;\n\n    if (this.adapter_.isElementInContainer(el)) {\n      return;\n    }\n\n    this.close();\n  };\n\n  /**\n   * Handle keys that close the surface.\n   * @param {!Event} evt\n   */\n  handleKeydown(evt) {\n    const {keyCode, key, shiftKey} = evt;\n\n    const isEscape = key === 'Escape' || keyCode === 27;\n    const isTab = key === 'Tab' || keyCode === 9;\n\n    if (isEscape) {\n      this.close();\n    } else if (isTab) {\n      if (this.adapter_.isLastElementFocused() && !shiftKey) {\n        this.adapter_.focusFirstElement();\n        evt.preventDefault();\n      } else if (this.adapter_.isFirstElementFocused() && shiftKey) {\n        this.adapter_.focusLastElement();\n        evt.preventDefault();\n      }\n    }\n  }\n\n  /**\n   * @return {!AutoLayoutMeasurements} Measurements used to position menu surface popup.\n   */\n  getAutoLayoutMeasurements_() {\n    let anchorRect = this.adapter_.getAnchorDimensions();\n    const viewport = this.adapter_.getWindowDimensions();\n    const bodyDimensions = this.adapter_.getBodyDimensions();\n    const windowScroll = this.adapter_.getWindowScroll();\n\n    if (!anchorRect) {\n      anchorRect = /** @type {ClientRect} */ ({\n        x: this.position_.x,\n        y: this.position_.y,\n        top: this.position_.y,\n        bottom: this.position_.y,\n        left: this.position_.x,\n        right: this.position_.x,\n        height: 0,\n        width: 0,\n      });\n    }\n\n    return {\n      viewport,\n      bodyDimensions,\n      windowScroll,\n      viewportDistance: {\n        top: anchorRect.top,\n        right: viewport.width - anchorRect.right,\n        left: anchorRect.left,\n        bottom: viewport.height - anchorRect.bottom,\n      },\n      anchorHeight: anchorRect.height,\n      anchorWidth: anchorRect.width,\n      surfaceHeight: this.dimensions_.height,\n      surfaceWidth: this.dimensions_.width,\n    };\n  }\n\n  /**\n   * Computes the corner of the anchor from which to animate and position the menu surface.\n   * @return {!Corner}\n   * @private\n   */\n  getOriginCorner_() {\n    // Defaults: open from the top left.\n    let corner = Corner.TOP_LEFT;\n\n    const {viewportDistance, anchorHeight, anchorWidth, surfaceHeight, surfaceWidth} = this.measures_;\n    const isBottomAligned = Boolean(this.anchorCorner_ & CornerBit.BOTTOM);\n    const availableTop = isBottomAligned ? viewportDistance.top + anchorHeight + this.anchorMargin_.bottom\n      : viewportDistance.top + this.anchorMargin_.top;\n    const availableBottom = isBottomAligned ? viewportDistance.bottom - this.anchorMargin_.bottom\n      : viewportDistance.bottom + anchorHeight - this.anchorMargin_.top;\n\n    const topOverflow = surfaceHeight - availableTop;\n    const bottomOverflow = surfaceHeight - availableBottom;\n    if (bottomOverflow > 0 && topOverflow < bottomOverflow) {\n      corner |= CornerBit.BOTTOM;\n    }\n\n    const isRtl = this.adapter_.isRtl();\n    const isFlipRtl = Boolean(this.anchorCorner_ & CornerBit.FLIP_RTL);\n    const avoidHorizontalOverlap = Boolean(this.anchorCorner_ & CornerBit.RIGHT);\n    const isAlignedRight = (avoidHorizontalOverlap && !isRtl) ||\n      (!avoidHorizontalOverlap && isFlipRtl && isRtl);\n    const availableLeft = isAlignedRight ? viewportDistance.left + anchorWidth + this.anchorMargin_.right :\n      viewportDistance.left + this.anchorMargin_.left;\n    const availableRight = isAlignedRight ? viewportDistance.right - this.anchorMargin_.right :\n      viewportDistance.right + anchorWidth - this.anchorMargin_.left;\n\n    const leftOverflow = surfaceWidth - availableLeft;\n    const rightOverflow = surfaceWidth - availableRight;\n\n    if ((leftOverflow < 0 && isAlignedRight && isRtl) ||\n        (avoidHorizontalOverlap && !isAlignedRight && leftOverflow < 0) ||\n        (rightOverflow > 0 && leftOverflow < rightOverflow)) {\n      corner |= CornerBit.RIGHT;\n    }\n\n    return /** @type {Corner} */ (corner);\n  }\n\n  /**\n   * @param {!Corner} corner Origin corner of the menu surface.\n   * @return {number} Horizontal offset of menu surface origin corner from corresponding anchor corner.\n   * @private\n   */\n  getHorizontalOriginOffset_(corner) {\n    const {anchorWidth} = this.measures_;\n    // isRightAligned corresponds to using the 'right' property on the surface.\n    const isRightAligned = Boolean(corner & CornerBit.RIGHT);\n    const avoidHorizontalOverlap = Boolean(this.anchorCorner_ & CornerBit.RIGHT);\n\n    if (isRightAligned) {\n      const rightOffset = avoidHorizontalOverlap ? anchorWidth - this.anchorMargin_.left : this.anchorMargin_.right;\n\n      // For hoisted or fixed elements, adjust the offset by the difference between viewport width and body width so\n      // when we calculate the right value (`adjustPositionForHoistedElement_`) based on the element position,\n      // the right property is correct.\n      if (this.hoistedElement_ || this.isFixedPosition_) {\n        return rightOffset - (this.measures_.viewport.width - this.measures_.bodyDimensions.width);\n      }\n\n      return rightOffset;\n    }\n\n    return avoidHorizontalOverlap ? anchorWidth - this.anchorMargin_.right : this.anchorMargin_.left;\n  }\n\n  /**\n   * @param {!Corner} corner Origin corner of the menu surface.\n   * @return {number} Vertical offset of menu surface origin corner from corresponding anchor corner.\n   * @private\n   */\n  getVerticalOriginOffset_(corner) {\n    const {anchorHeight} = this.measures_;\n    const isBottomAligned = Boolean(corner & CornerBit.BOTTOM);\n    const avoidVerticalOverlap = Boolean(this.anchorCorner_ & CornerBit.BOTTOM);\n    let y = 0;\n\n    if (isBottomAligned) {\n      y = avoidVerticalOverlap ? anchorHeight - this.anchorMargin_.top : -this.anchorMargin_.bottom;\n    } else {\n      y = avoidVerticalOverlap ? (anchorHeight + this.anchorMargin_.bottom) : this.anchorMargin_.top;\n    }\n    return y;\n  }\n\n  /**\n   * @param {!Corner} corner Origin corner of the menu surface.\n   * @return {number} Maximum height of the menu surface, based on available space. 0 indicates should not be set.\n   * @private\n   */\n  getMenuSurfaceMaxHeight_(corner) {\n    let maxHeight = 0;\n    const {viewportDistance} = this.measures_;\n    const isBottomAligned = Boolean(corner & CornerBit.BOTTOM);\n    const {MARGIN_TO_EDGE} = MDCMenuSurfaceFoundation.numbers;\n\n    // When maximum height is not specified, it is handled from css.\n    if (isBottomAligned) {\n      maxHeight = viewportDistance.top + this.anchorMargin_.top - MARGIN_TO_EDGE;\n      if (!(this.anchorCorner_ & CornerBit.BOTTOM)) {\n        maxHeight += this.measures_.anchorHeight;\n      }\n    } else {\n      maxHeight = viewportDistance.bottom - this.anchorMargin_.bottom + this.measures_.anchorHeight - MARGIN_TO_EDGE;\n      if (this.anchorCorner_ & CornerBit.BOTTOM) {\n        maxHeight -= this.measures_.anchorHeight;\n      }\n    }\n\n    return maxHeight;\n  }\n\n  /** @private */\n  autoPosition_() {\n    // Compute measurements for autoposition methods reuse.\n    this.measures_ = this.getAutoLayoutMeasurements_();\n\n    const corner = this.getOriginCorner_();\n    const maxMenuSurfaceHeight = this.getMenuSurfaceMaxHeight_(corner);\n    const verticalAlignment = (corner & CornerBit.BOTTOM) ? 'bottom' : 'top';\n    let horizontalAlignment = (corner & CornerBit.RIGHT) ? 'right' : 'left';\n    const horizontalOffset = this.getHorizontalOriginOffset_(corner);\n    const verticalOffset = this.getVerticalOriginOffset_(corner);\n    let position = {\n      [horizontalAlignment]: horizontalOffset ? horizontalOffset : '0',\n      [verticalAlignment]: verticalOffset ? verticalOffset : '0',\n    };\n    const {anchorWidth, surfaceWidth} = this.measures_;\n    // Center align when anchor width is comparable or greater than menu surface, otherwise keep corner.\n    if (anchorWidth / surfaceWidth > numbers.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO) {\n      horizontalAlignment = 'center';\n    }\n\n    // If the menu-surface has been hoisted to the body, it's no longer relative to the anchor element\n    if (this.hoistedElement_ || this.isFixedPosition_) {\n      position = this.adjustPositionForHoistedElement_(position);\n    }\n\n    for (const prop in position) {\n      if (position.hasOwnProperty(prop) && position[prop] !== '0') {\n        position[prop] = `${parseInt(position[prop], 10)}px`;\n      }\n    }\n\n    this.adapter_.setTransformOrigin(`${horizontalAlignment} ${verticalAlignment}`);\n    this.adapter_.setPosition(position);\n    this.adapter_.setMaxHeight(maxMenuSurfaceHeight ? maxMenuSurfaceHeight + 'px' : '');\n\n    // Clear measures after positioning is complete.\n    this.measures_ = null;\n  }\n\n  /**\n   * Calculates the offsets for positioning the menu-surface when the menu-surface has been\n   * hoisted to the body.\n   * @param {!{\n   *   top: (string|undefined),\n   *   right: (string|undefined),\n   *   bottom: (string|undefined),\n   *   left: (string|undefined)\n   * }} position\n   * @return {!{\n   *   top: (string|undefined),\n   *   right: (string|undefined),\n   *   bottom: (string|undefined),\n   *   left: (string|undefined)\n   * }} position\n   * @private\n   */\n  adjustPositionForHoistedElement_(position) {\n    const {windowScroll, viewportDistance} = this.measures_;\n\n    for (const prop in position) {\n      if (position.hasOwnProperty(prop)) {\n        // Hoisted surfaces need to have the anchor elements location on the page added to the\n        // position properties for proper alignment on the body.\n        if (viewportDistance.hasOwnProperty(prop)) {\n          position[prop] = parseInt(position[prop], 10) + viewportDistance[prop];\n        }\n\n        // Surfaces that are absolutely positioned need to have additional calculations for scroll\n        // and bottom positioning.\n        if (!this.isFixedPosition_) {\n          if (prop === 'top') {\n            position[prop] = parseInt(position[prop], 10) + windowScroll.y;\n          } else if (prop === 'bottom') {\n            position[prop] = parseInt(position[prop], 10) - windowScroll.y;\n          } else if (prop === 'left') {\n            position[prop] = parseInt(position[prop], 10) + windowScroll.x;\n          } else if (prop === 'right') {\n            position[prop] = parseInt(position[prop], 10) - windowScroll.x;\n          }\n        }\n      }\n    }\n\n    return position;\n  }\n\n  /**\n   * Open the menu surface.\n   */\n  open() {\n    this.adapter_.saveFocus();\n\n    if (!this.quickOpen_) {\n      this.adapter_.addClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_OPEN);\n    }\n\n    this.animationRequestId_ = requestAnimationFrame(() => {\n      this.adapter_.addClass(MDCMenuSurfaceFoundation.cssClasses.OPEN);\n      this.dimensions_ = this.adapter_.getInnerDimensions();\n      this.autoPosition_();\n      if (this.quickOpen_) {\n        this.adapter_.notifyOpen();\n      } else {\n        this.openAnimationEndTimerId_ = setTimeout(() => {\n          this.openAnimationEndTimerId_ = 0;\n          this.adapter_.removeClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_OPEN);\n          this.adapter_.notifyOpen();\n        }, numbers.TRANSITION_OPEN_DURATION);\n      }\n    });\n    this.isOpen_ = true;\n  }\n\n  /**\n   * Closes the menu surface.\n   */\n  close() {\n    if (!this.quickOpen_) {\n      this.adapter_.addClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_CLOSED);\n    }\n\n    requestAnimationFrame(() => {\n      this.adapter_.removeClass(MDCMenuSurfaceFoundation.cssClasses.OPEN);\n      if (this.quickOpen_) {\n        this.adapter_.notifyClose();\n      } else {\n        this.closeAnimationEndTimerId_ = setTimeout(() => {\n          this.closeAnimationEndTimerId_ = 0;\n          this.adapter_.removeClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_CLOSED);\n          this.adapter_.notifyClose();\n        }, numbers.TRANSITION_CLOSE_DURATION);\n      }\n    });\n\n    this.isOpen_ = false;\n    this.maybeRestoreFocus_();\n  }\n\n  /**\n   * The last focused element when the menu surface was opened should regain focus, if the user is\n   * focused on or within the menu surface when it is closed.\n   * @private\n   */\n  maybeRestoreFocus_() {\n    if (this.adapter_.isFocused() || this.adapter_.isElementInContainer(document.activeElement)) {\n      this.adapter_.restoreFocus();\n    }\n  }\n\n  /** @return {boolean} */\n  isOpen() {\n    return this.isOpen_;\n  }\n\n  /**\n   * isFinite that doesn't force conversion to number type.\n   * Equivalent to Number.isFinite in ES2015, but is not included in IE11.\n   * @param {number} num\n   * @return {boolean}\n   * @private\n   */\n  typeCheckisFinite_(num) {\n    return typeof num === 'number' && isFinite(num);\n  }\n}\n\nexport {MDCMenuSurfaceFoundation, AnchorMargin};\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/* eslint no-unused-vars: [2, {\"args\": \"none\"}] */\n\n/**\n * Adapter for MDCMenuSurface. Provides an interface for managing\n * - classes\n * - dom\n * - focus\n * - position\n * - dimensions\n * - event handlers\n *\n * Additionally, provides type information for the adapter to the Closure\n * compiler.\n *\n * Implement this adapter for your framework of choice to delegate updates to\n * the component in your framework of choice. See architecture documentation\n * for more details.\n * https://github.com/material-components/material-components-web/blob/master/docs/code/architecture.md\n *\n * @record\n */\nclass MDCMenuSurfaceAdapter {\n  /** @param {string} className */\n  addClass(className) {}\n\n  /** @param {string} className */\n  removeClass(className) {}\n\n  /**\n   * @param {string} className\n   * @return {boolean}\n   */\n  hasClass(className) {}\n\n  /** @return {boolean} */\n  hasAnchor() {}\n\n  /** Emits an event when the menu surface is closed. */\n  notifyClose() {}\n\n  /** Emits an event when the menu surface is opened. */\n  notifyOpen() {}\n\n  /**\n   * @return {boolean}\n   * @param {EventTarget} el\n   */\n  isElementInContainer(el) {}\n\n  /** @return {boolean} */\n  isRtl() {}\n\n  /** @param {string} origin */\n  setTransformOrigin(origin) {}\n\n  /** @return {boolean} */\n  isFocused() {}\n\n  /** Saves the element that was focused before the menu surface was opened. */\n  saveFocus() {}\n\n  /** Restores focus to the element that was focused before the menu surface was opened. */\n  restoreFocus() {}\n\n  /** @return {boolean} */\n  isFirstElementFocused() {}\n\n  /** @return {boolean} */\n  isLastElementFocused() {}\n\n  /** Focuses the first focusable element in the menu-surface. */\n  focusFirstElement() {}\n\n  /** Focuses the first focusable element in the menu-surface. */\n  focusLastElement() {}\n\n  /** @return {!{width: number, height: number}} */\n  getInnerDimensions() {}\n\n  /** @return {!{width: number, height: number, top: number, right: number, bottom: number, left: number}} */\n  getAnchorDimensions() {}\n\n  /** @return {!{ width: number, height: number }} */\n  getWindowDimensions() {}\n\n  /** @return {!{ width: number, height: number }} */\n  getBodyDimensions() {}\n\n  /** @return {!{ width: number, height: number }} */\n  getWindowScroll() {}\n\n  /** @param {!{\n  *   top: (string|undefined),\n  *   right: (string|undefined),\n  *   bottom: (string|undefined),\n  *   left: (string|undefined)\n  * }} position */\n  setPosition(position) {}\n\n  /** @param {string} height */\n  setMaxHeight(height) {}\n}\n\nexport {MDCMenuSurfaceAdapter};\n","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nimport MDCFoundation from './foundation';\n\n/**\n * @template F\n */\nclass MDCComponent {\n  /**\n   * @param {!Element} root\n   * @return {!MDCComponent}\n   */\n  static attachTo(root) {\n    // Subclasses which extend MDCBase should provide an attachTo() method that takes a root element and\n    // returns an instantiated component with its root set to that element. Also note that in the cases of\n    // subclasses, an explicit foundation class will not have to be passed in; it will simply be initialized\n    // from getDefaultFoundation().\n    return new MDCComponent(root, new MDCFoundation());\n  }\n\n  /**\n   * @param {!Element} root\n   * @param {F=} foundation\n   * @param {...?} args\n   */\n  constructor(root, foundation = undefined, ...args) {\n    /** @protected {!Element} */\n    this.root_ = root;\n    this.initialize(...args);\n    // Note that we initialize foundation here and not within the constructor's default param so that\n    // this.root_ is defined and can be used within the foundation class.\n    /** @protected {!F} */\n    this.foundation_ = foundation === undefined ? this.getDefaultFoundation() : foundation;\n    this.foundation_.init();\n    this.initialSyncWithDOM();\n  }\n\n  initialize(/* ...args */) {\n    // Subclasses can override this to do any additional setup work that would be considered part of a\n    // \"constructor\". Essentially, it is a hook into the parent constructor before the foundation is\n    // initialized. Any additional arguments besides root and foundation will be passed in here.\n  }\n\n  /**\n   * @return {!F} foundation\n   */\n  getDefaultFoundation() {\n    // Subclasses must override this method to return a properly configured foundation class for the\n    // component.\n    throw new Error('Subclasses must override getDefaultFoundation to return a properly configured ' +\n      'foundation class');\n  }\n\n  initialSyncWithDOM() {\n    // Subclasses should override this method if they need to perform work to synchronize with a host DOM\n    // object. An example of this would be a form control wrapper that needs to synchronize its internal state\n    // to some property or attribute of the host DOM. Please note: this is *not* the place to perform DOM\n    // reads/writes that would cause layout / paint, as this is called synchronously from within the constructor.\n  }\n\n  destroy() {\n    // Subclasses may implement this method to release any resources / deregister any listeners they have\n    // attached. An example of this might be deregistering a resize event from the window object.\n    this.foundation_.destroy();\n  }\n\n  /**\n   * Wrapper method to add an event listener to the component's root element. This is most useful when\n   * listening for custom events.\n   * @param {string} evtType\n   * @param {!Function} handler\n   */\n  listen(evtType, handler) {\n    this.root_.addEventListener(evtType, handler);\n  }\n\n  /**\n   * Wrapper method to remove an event listener to the component's root element. This is most useful when\n   * unlistening for custom events.\n   * @param {string} evtType\n   * @param {!Function} handler\n   */\n  unlisten(evtType, handler) {\n    this.root_.removeEventListener(evtType, handler);\n  }\n\n  /**\n   * Fires a cross-browser-compatible custom event from the component root of the given type,\n   * with the given data.\n   * @param {string} evtType\n   * @param {!Object} evtData\n   * @param {boolean=} shouldBubble\n   */\n  emit(evtType, evtData, shouldBubble = false) {\n    let evt;\n    if (typeof CustomEvent === 'function') {\n      evt = new CustomEvent(evtType, {\n        detail: evtData,\n        bubbles: shouldBubble,\n      });\n    } else {\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(evtType, shouldBubble, false, evtData);\n    }\n\n    this.root_.dispatchEvent(evt);\n  }\n}\n\nexport default MDCComponent;\n","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * @template A\n */\nclass MDCFoundation {\n  /** @return enum{cssClasses} */\n  static get cssClasses() {\n    // Classes extending MDCFoundation should implement this method to return an object which exports every\n    // CSS class the foundation class needs as a property. e.g. {ACTIVE: 'mdc-component--active'}\n    return {};\n  }\n\n  /** @return enum{strings} */\n  static get strings() {\n    // Classes extending MDCFoundation should implement this method to return an object which exports all\n    // semantic strings as constants. e.g. {ARIA_ROLE: 'tablist'}\n    return {};\n  }\n\n  /** @return enum{numbers} */\n  static get numbers() {\n    // Classes extending MDCFoundation should implement this method to return an object which exports all\n    // of its semantic numbers as constants. e.g. {ANIMATION_DELAY_MS: 350}\n    return {};\n  }\n\n  /** @return {!Object} */\n  static get defaultAdapter() {\n    // Classes extending MDCFoundation may choose to implement this getter in order to provide a convenient\n    // way of viewing the necessary methods of an adapter. In the future, this could also be used for adapter\n    // validation.\n    return {};\n  }\n\n  /**\n   * @param {A=} adapter\n   */\n  constructor(adapter = {}) {\n    /** @protected {!A} */\n    this.adapter_ = adapter;\n  }\n\n  init() {\n    // Subclasses should override this method to perform initialization routines (registering events, etc.)\n  }\n\n  destroy() {\n    // Subclasses should override this method to perform de-initialization routines (de-registering events, etc.)\n  }\n}\n\nexport default MDCFoundation;\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/** @enum {string} */\nconst cssClasses = {\n  ANCHOR: 'mdc-menu-surface--anchor',\n  ANIMATING_CLOSED: 'mdc-menu-surface--animating-closed',\n  ANIMATING_OPEN: 'mdc-menu-surface--animating-open',\n  FIXED: 'mdc-menu-surface--fixed',\n  OPEN: 'mdc-menu-surface--open',\n  ROOT: 'mdc-menu-surface',\n};\n\n/** @enum {string} */\nconst strings = {\n  CLOSED_EVENT: 'MDCMenuSurface:closed',\n  OPENED_EVENT: 'MDCMenuSurface:opened',\n  FOCUSABLE_ELEMENTS: 'button:not(:disabled), [href]:not([aria-disabled=\"true\"]), input:not(:disabled), ' +\n  'select:not(:disabled), textarea:not(:disabled), [tabindex]:not([tabindex=\"-1\"]):not([aria-disabled=\"true\"])',\n};\n\n/** @enum {number} */\nconst numbers = {\n  // Total duration of menu-surface open animation.\n  TRANSITION_OPEN_DURATION: 120,\n  // Total duration of menu-surface close animation.\n  TRANSITION_CLOSE_DURATION: 75,\n  // Margin left to the edge of the viewport when menu-surface is at maximum possible height.\n  MARGIN_TO_EDGE: 32,\n  // Ratio of anchor width to menu-surface width for switching from corner positioning to center positioning.\n  ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO: 0.67,\n};\n\n/**\n * Enum for bits in the {@see Corner) bitmap.\n * @enum {number}\n */\nconst CornerBit = {\n  BOTTOM: 1,\n  CENTER: 2,\n  RIGHT: 4,\n  FLIP_RTL: 8,\n};\n\n/**\n * Enum for representing an element corner for positioning the menu-surface.\n *\n * The START constants map to LEFT if element directionality is left\n * to right and RIGHT if the directionality is right to left.\n * Likewise END maps to RIGHT or LEFT depending on the directionality.\n *\n * @enum {number}\n */\nconst Corner = {\n  TOP_LEFT: 0,\n  TOP_RIGHT: CornerBit.RIGHT,\n  BOTTOM_LEFT: CornerBit.BOTTOM,\n  BOTTOM_RIGHT: CornerBit.BOTTOM | CornerBit.RIGHT,\n  TOP_START: CornerBit.FLIP_RTL,\n  TOP_END: CornerBit.FLIP_RTL | CornerBit.RIGHT,\n  BOTTOM_START: CornerBit.BOTTOM | CornerBit.FLIP_RTL,\n  BOTTOM_END: CornerBit.BOTTOM | CornerBit.RIGHT | CornerBit.FLIP_RTL,\n};\n\nexport {cssClasses, strings, numbers, CornerBit, Corner};\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/** @type {string|undefined} */\nlet storedTransformPropertyName_;\n\n/**\n * Returns the name of the correct transform property to use on the current browser.\n * @param {!Window} globalObj\n * @param {boolean=} forceRefresh\n * @return {string}\n */\nfunction getTransformPropertyName(globalObj, forceRefresh = false) {\n  if (storedTransformPropertyName_ === undefined || forceRefresh) {\n    const el = globalObj.document.createElement('div');\n    const transformPropertyName = ('transform' in el.style ? 'transform' : 'webkitTransform');\n    storedTransformPropertyName_ = transformPropertyName;\n  }\n\n  return storedTransformPropertyName_;\n}\n\nexport {getTransformPropertyName};\n"],"names":["tslib_1.__extends","MDCComponent","MDCMenuSurface","root","foundation_","setQuickOpen","quickOpen","close","open","lastFocusableElement_","focusableElements","length","firstFocusableElement_","root_","querySelectorAll","strings","FOCUSABLE_ELEMENTS","value","isOpen","style","maxHeight","height","setMaxHeight","bottom","position","top","right","left","setPosition","y","window","pageYOffset","x","pageXOffset","getWindowScroll","document","body","clientHeight","width","clientWidth","getBodyDimensions","innerHeight","innerWidth","getWindowDimensions","anchorElement","getBoundingClientRect","getAnchorDimensions","offsetHeight","offsetWidth","getInnerDimensions","focus","focusLastElement","focusFirstElement","activeElement","isLastElementFocused","isFirstElementFocused","previousFocus_","contains","restoreFocus","saveFocus","isFocused","getFocusAdapterMethods_","getDimensionAdapterMethods_","util","origin","setTransformOrigin","getComputedStyle","getPropertyValue","isRtl","el","isElementInContainer","emit","MDCMenuSurfaceFoundation","OPENED_EVENT","notifyOpen","CLOSED_EVENT","notifyClose","hasAnchor","classList","className","hasClass","remove","removeClass","add","addClass","Object","assign","setAnchorMargin","margin","setAnchorCorner","corner","setIsHoisted","setAbsolutePosition","setFixedPosition","isFixed","cssClasses","FIXED","element","isHoisted","appendChild","parentElement","removeChild","removeEventListener","deregisterBodyClickListener_","registerBodyClickListener_","handleKeydown_","addEventListener","handleBodyClick_","handleBodyClick","evt","handleKeydown","ANCHOR","args","MDCFoundation","num","isFinite","isOpen_","adapter_","maybeRestoreFocus_","numbers","TRANSITION_CLOSE_DURATION","ANIMATING_CLOSED","closeAnimationEndTimerId_","setTimeout","quickOpen_","OPEN","requestAnimationFrame","TRANSITION_OPEN_DURATION","ANIMATING_OPEN","openAnimationEndTimerId_","autoPosition_","dimensions_","animationRequestId_","prop","parseInt","windowScroll","isFixedPosition_","viewportDistance","hasOwnProperty","measures_","maxMenuSurfaceHeight","horizontalAlignment","verticalAlignment","adjustPositionForHoistedElement_","hoistedElement_","anchorWidth","surfaceWidth","ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO","horizontalOffset","verticalOffset","getVerticalOriginOffset_","getHorizontalOriginOffset_","CornerBit","RIGHT","BOTTOM","getMenuSurfaceMaxHeight_","getOriginCorner_","getAutoLayoutMeasurements_","anchorHeight","anchorCorner_","anchorMargin_","MARGIN_TO_EDGE","isBottomAligned","Boolean","avoidVerticalOverlap","avoidHorizontalOverlap","rightOffset","viewport","bodyDimensions","isRightAligned","leftOverflow","isAlignedRight","rightOverflow","availableRight","availableLeft","isFlipRtl","FLIP_RTL","bottomOverflow","topOverflow","surfaceHeight","availableBottom","availableTop","Corner","TOP_LEFT","anchorRect","position_","preventDefault","shiftKey","isTab","isEscape","key","keyCode","target","typeCheckisFinite_","isFixedPosition","cancelAnimationFrame","clearTimeout","Error","ROOT","TOP_START","defaultAdapter","adapter","MDCMenuSurfaceAdapter","dispatchEvent","initCustomEvent","evtType","shouldBubble","evtData","createEvent","bubbles","detail","CustomEvent","handler","destroy","initialSyncWithDOM","init","foundation","undefined","getDefaultFoundation","initialize","BOTTOM_END","BOTTOM_START","TOP_END","BOTTOM_RIGHT","BOTTOM_LEFT","TOP_RIGHT","CENTER","storedTransformPropertyName_","transformPropertyName","globalObj","createElement","forceRefresh","getTransformPropertyName"],"mappings":"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"}