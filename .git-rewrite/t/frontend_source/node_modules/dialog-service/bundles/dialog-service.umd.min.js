!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/material/dialog"),require("rxjs/operators"),require("ng-quick-form"),require("@angular/forms"),require("@angular/common"),require("@angular/material/button"),require("@angular/material/checkbox"),require("@angular/material/input"),require("@angular/material/progress-spinner"),require("@angular/material/radio"),require("@angular/material/select"),require("@angular/material/slide-toggle"),require("@angular-mdc/web"),require("rxjs"),require("@angular-mdc/web/dialog")):"function"==typeof define&&define.amd?define("dialog-service",["exports","@angular/core","@angular/material/dialog","rxjs/operators","ng-quick-form","@angular/forms","@angular/common","@angular/material/button","@angular/material/checkbox","@angular/material/input","@angular/material/progress-spinner","@angular/material/radio","@angular/material/select","@angular/material/slide-toggle","@angular-mdc/web","rxjs","@angular-mdc/web/dialog"],e):e((t=t||self)["dialog-service"]={},t.ng.core,t.ng.material.dialog,t.rxjs.operators,t.ngQuickForm,t.ng.forms,t.ng.common,t.ng.material.button,t.ng.material.checkbox,t.ng.material.input,t.ng.material["progress-spinner"],t.ng.material.radio,t.ng.material.select,t.ng.material["slide-toggle"],t.web,t.rxjs,t.dialog$1)}(this,function(t,e,n,o,a,r,i,c,l,u,d,s,g,m,f,p,h){"use strict";var y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function b(t,e){function n(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var v=function(){return(v=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function C(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}var M=function(){return function(){}}(),D=function(){function t(t){this.data=t}return t.decorators=[{type:e.Component,args:[{template:'<h1 mat-dialog-title>{{data.title}}</h1>\n<div mat-dialog-content *ngIf="data.content">\n    <div [innerHtml]="data.content" class="content"></div>\n</div>\n<div mat-dialog-actions>\n    <button mat-button [mat-dialog-close]="true" cdkFocusInitial>{{data.acceptButton}}</button>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[n.MAT_DIALOG_DATA]}]}]},t}(),O=function(){function t(t){this.data=t}return t.decorators=[{type:e.Component,args:[{template:"<h1 mat-dialog-title>{{data.title}}</h1>\n<mat-spinner></mat-spinner>\n",changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[":host{display:flex;flex-direction:column;align-items:center}"]}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[n.MAT_DIALOG_DATA]}]}]},t}(),P=function(){function t(t){this.data=t}return t.decorators=[{type:e.Component,args:[{template:'<h1 mat-dialog-title>{{data.title}}</h1>\n<div mat-dialog-content *ngIf="data.content">\n    <div [innerHtml]="data.content" class="content"></div>\n</div>\n<div mat-dialog-actions>\n    <button mat-button [mat-dialog-close]="true" cdkFocusInitial>{{data.acceptButton}}</button>\n    <button mat-button [mat-dialog-close]="false">{{data.cancelButton}}</button>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[n.MAT_DIALOG_DATA]}]}]},t}(),w=function(t){var e,n,o,a;if(t.markAsDirty(),t.markAsTouched(),t instanceof r.FormGroup){var i=Object.keys(t.controls);try{for(var c=C(i),l=c.next();!l.done;l=c.next()){var u=l.value;w(t.controls[u])}}catch(m){e={error:m}}finally{try{l&&!l.done&&(n=c["return"])&&n.call(c)}finally{if(e)throw e.error}}}else if(t instanceof r.FormArray)try{for(var d=C(t.controls),s=d.next();!s.done;s=d.next()){var g=s.value;w(g)}}catch(f){o={error:f}}finally{try{s&&!s.done&&(a=d["return"])&&a.call(d)}finally{if(o)throw o.error}}},I=function(){function t(t,e,n,r,i,c,l,u){var d=this;this.cd=t,this.dialogService=e,this.closeable=n,this.cancelMessage=r,this.formFields=i,this.rawValue=c,this.valueChanges=l,this.formCreated=u,this.submitted=!1,this.form=a.QuickForm.makeForm(this.formFields),u&&u(this.form,this.cd),this.valueChanges&&(this.formSubscription=this.form.valueChanges.pipe(o.debounceTime(100),o.tap(function(e){return d.valueChanges.next({value:e,form:d.form,cd:t})})).subscribe())}return t.prototype.doClose=function(){var t=this;this.dialogService.withConfirm(this.cancelMessage).pipe(o.filter(function(t){return t}),o.tap(function(){return t.closeable.close(!1)})).subscribe()},t.prototype.doSubmit=function(){var t=this;"PENDING"===this.form.status?this.dialogService.withProgress(this.form.statusChanges.pipe(o.startWith(this.form.status),o.filter(function(t){return"PENDING"!==t}),o.take(1),o.tap(function(){return t.doNonPendingSubmit()}))):this.doNonPendingSubmit()},t.prototype.doNonPendingSubmit=function(){!function(t,e){if(!t)throw e?new Error("Assertion error: "+e):new Error("Assertion error: Unexpected condition")}("PENDING"!==this.form.status,"Form status should not be pending"),w(this.form),this.submitted=!0,this.cd.markForCheck(),this.form.valid&&this.closeable.close(a.QuickForm.preProcessFormValues(this.rawValue?this.form.getRawValue():this.form.value))},t.prototype.ngOnDestroy=function(){this.formSubscription&&this.formSubscription.unsubscribe()},t}(),A=function(t){function o(e,n,o,a){var r=t.call(this,e,o,n,a.cancelMessage,a.fields,a.rawValue,a.valueChanges,a.formCreated)||this;return r.data=a,r}return b(o,t),Object.defineProperty(o.prototype,"attrFlexCell",{get:function(){return!!(this.data.layout&&this.data.layout.flexCell)||null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attrGutter",{get:function(){return!!(this.data.layout&&this.data.layout.gutter)||null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attrGrowItems",{get:function(){return!!(this.data.layout&&this.data.layout.growItems)||null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attrDefaultCell6",{get:function(){return 6===(this.data.layout&&this.data.layout.flexCell)||null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attrDefaultCell12",{get:function(){return 12===(this.data.layout&&this.data.layout.flexCell)||null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attrDebug",{get:function(){return!!(this.data.layout&&this.data.layout.debug)||null},enumerable:!0,configurable:!0}),o.decorators=[{type:e.Component,args:[{template:'<h1 mat-dialog-title>{{data.title}}</h1>\n<div mat-dialog-content>\n    <div *ngIf="data.content" [innerHtml]="data.content" class="content"></div>\n    <div>\n        <form [formGroup]="form"\n              [attr.flex-cell]="attrFlexCell"\n              [attr.gutter]="attrGutter"\n              [attr.grow-items]="attrGrowItems"\n              [attr.default-cell-6]="attrDefaultCell6"\n              [attr.default-cell-12]="attrDefaultCell12"\n              [attr.debug]="attrDebug"\n              autocomplete="off">\n            <quick-form-field [field]="field" [form]="form"\n                              *ngFor="let field of formFields"></quick-form-field>\n        </form>\n    </div>\n</div>\n<div mat-dialog-actions>\n    <button mat-button color="primary" type="button"\n            (click)="doSubmit()">{{data.submitButton}}</button>\n    <button mat-button type="button" (click)="doClose()">{{data.cancelButton}}</button>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],o.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:n.MatDialogRef},{type:M},{type:undefined,decorators:[{type:e.Inject,args:[n.MAT_DIALOG_DATA]}]}]},o}(I),j=function(t){function a(e){var n=t.call(this)||this;return n.dialog=e,n}return b(a,t),a.prototype.withProgress=function(t,e,n){var a;e=e||"Please Wait...";var r=this.dialog.open(O,v({disableClose:!0,data:{title:e}},n&&n.dialogOptions||{}));return r.afterOpened().pipe(o.concatMap(function(){return t}),o.tap(function(t){return a=t}),o.finalize(function(){return r.close()})).subscribe(),r.afterClosed().pipe(o.map(function(){return a}))},a.prototype.withAlert=function(t,e){return(e=e||{}).acceptButton=e.acceptButton||"OK",this.dialog.open(D,v({disableClose:!0,minWidth:200,data:v({title:t},e)},e&&e.dialogOptions||{})).afterClosed().pipe(o.map(function(t){return!0===t}))},a.prototype.withConfirm=function(t,e){return t=t||"Confirm?",(e=e||{}).acceptButton=e.acceptButton||"Yes",e.cancelButton=e.cancelButton||"No",this.dialog.open(P,v({disableClose:!0,data:v({title:t},e)},e&&e.dialogOptions||{})).afterClosed().pipe(o.map(function(t){return t}))},a.prototype.withForm=function(t,e,n){return(n=n||{}).submitButton=n.submitButton||"Submit",n.cancelButton=n.cancelButton||"Cancel",n.cancelMessage=n.cancelMessage||"Cancel?",n.rawValue=n.rawValue||!1,this.dialog.open(A,v({disableClose:!0,data:v({title:t,fields:e},n)},n&&n.dialogOptions||{})).afterClosed()},a.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],a.ctorParameters=function(){return[{type:n.MatDialog}]},a.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new a(e.ɵɵinject(n.MatDialog))},token:a,providedIn:"root"}),a}(M),x=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[D,P,A,O],entryComponents:[D,P,A,O],imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,c.MatButtonModule,l.MatCheckboxModule,n.MatDialogModule,u.MatInputModule,d.MatProgressSpinnerModule,s.MatRadioModule,g.MatSelectModule,m.MatSlideToggleModule,a.QuickFormModule],providers:[j,{provide:M,useClass:j}]}]}],t}(),B=function(){function t(t){this.data=t}return t.decorators=[{type:e.Component,args:[{template:"<mdc-dialog>\n    <mdc-dialog-container>\n        <mdc-dialog-surface>\n            <mdc-dialog-title>{{data.title}}</mdc-dialog-title>\n            <mdc-dialog-content>\n                <mdc-linear-progress></mdc-linear-progress>\n            </mdc-dialog-content>\n            <mdc-dialog-actions>\n                <button mdcDialogButton>Ok</button>\n            </mdc-dialog-actions>\n        </mdc-dialog-surface>\n    </mdc-dialog-container>\n</mdc-dialog>\n",changeDetection:e.ChangeDetectionStrategy.OnPush,styles:["button[mdcDialogButton]{opacity:0}mdc-dialog-actions{margin-top:-48px}"]}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[f.MDC_DIALOG_DATA]}]}]},t}(),S=function(){function t(t){this.data=t}return t.decorators=[{type:e.Component,args:[{template:'<mdc-dialog>\n    <mdc-dialog-container>\n        <mdc-dialog-surface>\n            <mdc-dialog-title>{{data.title}}</mdc-dialog-title>\n            <mdc-dialog-content *ngIf="data.content">{{data.content}}</mdc-dialog-content>\n            <mdc-dialog-actions>\n                <button mdcDialogButton mdcDialogAction="accept">\n                    {{data.acceptButton}}\n                </button>\n            </mdc-dialog-actions>\n        </mdc-dialog-surface>\n    </mdc-dialog-container>\n</mdc-dialog>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[f.MDC_DIALOG_DATA]}]}]},t}(),k=function(){function t(t){this.data=t}return t.decorators=[{type:e.Component,args:[{template:'<mdc-dialog>\n    <mdc-dialog-container>\n        <mdc-dialog-surface>\n            <mdc-dialog-title>{{data.title}}</mdc-dialog-title>\n            <mdc-dialog-content *ngIf="data.content">{{data.content}}</mdc-dialog-content>\n            <mdc-dialog-actions>\n                <button mdcDialogButton mdcDialogAction="accept">\n                    {{data.acceptButton}}\n                </button>\n                <button mdcDialogButton mdcDialogAction="close">\n                    {{data.cancelButton}}\n                </button>\n            </mdc-dialog-actions>\n        </mdc-dialog-surface>\n    </mdc-dialog-container>\n</mdc-dialog>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[f.MDC_DIALOG_DATA]}]}]},t}(),F=function(t){function n(e){var n=t.call(this)||this;return n.dialog=e,n}return b(n,t),n.prototype.withProgress=function(t,e){var n;e=e||"Please Wait...";var a=this.dialog.open(B,{clickOutsideToClose:!1,escapeToClose:!1,data:{title:e}});return a.afterOpened().pipe(o.concatMap(function(){return t}),o.tap(function(t){return n=t}),o.finalize(function(){return a.close()})).subscribe(),a.afterClosed().pipe(o.map(function(){return n}))},n.prototype.withAlert=function(t,e){return(e=e||{}).acceptButton=e.acceptButton||"OK",this.dialog.open(S,{escapeToClose:!1,clickOutsideToClose:!1,data:v({title:t},e)}).afterClosed().pipe(o.map(function(t){return"accept"===t}))},n.prototype.withConfirm=function(t,e){return t=t||"Confirm?",(e=e||{}).acceptButton=e.acceptButton||"Yes",e.cancelButton=e.cancelButton||"No",this.dialog.open(k,{escapeToClose:!1,clickOutsideToClose:!1,data:v({title:t},e)}).afterClosed().pipe(o.map(function(t){return"accept"===t}))},n.prototype.withForm=function(t,e,n){return p.throwError("withForm() is not supported in MDC mode")},n.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],n.ctorParameters=function(){return[{type:f.MdcDialog}]},n.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new n(e.ɵɵinject(h.MdcDialog))},token:n,providedIn:"root"}),n}(M),_=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[S,k,B],entryComponents:[S,k,B],imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,f.MdcButtonModule,f.MdcCheckboxModule,f.MdcDialogModule,f.MdcFormFieldModule,f.MdcLinearProgressModule,f.MdcRadioModule,f.MdcSelectModule,f.MdcSwitchModule,f.MdcTextFieldModule],providers:[F,{provide:M,useClass:F}]}]}],t}();t.DialogService=M,t.MatDialogService=j,t.MatDialogServiceModule=x,t.MdcDialogService=F,t.MdcDialogServiceModule=_,t.ɵa=D,t.ɵb=P,t.ɵc=A,t.ɵd=I,t.ɵe=O,t.ɵf=S,t.ɵg=k,t.ɵh=B,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=dialog-service.umd.min.js.map